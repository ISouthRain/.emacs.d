* åŒºåˆ†é…ç½®
#+BEGIN_SRC emacs-lisp

;; ;; ä¸åŒç”¨æˆ·ä½¿ç”¨ä¸åŒçš„é…ç½®
;; (when (string= system-name "Jack")
;; )

;; ;; åŒºåˆ† tui è¿˜æ˜¯ gui
;; (when (string= "w32" window-system) ;; w32 ns pc x nil
;; ;; (message "è¿™æ˜¯GUIæ–¹æ³•")
;; )

;; ;; ä¸Šé¢æ–¹æ³•å¯èƒ½ä¸å¤ªå¥½ç”¨
;; (if (display-graphic-p)
;;     ;; GUI ä»£ç æ”¾ç½®ï¼Œå¤šè¡Œä»£ç çš„è¯ç”¨ (progn) åŒ…ä¸€ä¸‹
;;     (progn (message "è¿™æ˜¯GUIæ–¹æ³•1")
;;            (message "è¿™æ˜¯GUIæ–¹æ³•2")
;; 	   )
;;     ;; TUI ä»£ç æ”¾ç½®
;;     (message "è¿™æ˜¯TUI 1")
;;     (message "è¿™æ˜¯TUI 2")
;;     )

;; ä¸åŒç³»ç»Ÿçš„é…ç½®
(when (string= "windows-nt" system-type)
  (setq url-proxy-services '(
  ("http" . "127.0.0.1:7890")
  ("https" . "127.0.0.1:7890")
  ("socks5" . "127.0.0.1:7891")))
)

(when (string= "gnu/linux" system-type)
  (setq url-proxy-services '(
  ("http" . "127.0.0.1:7890")
  ("https" . "127.0.0.1:7890")
  ("socks5" . "127.0.0.1:7891")))
)

;; (when (string= "darwin" system-type)
;;   (setq url-proxy-services '(
;;   ("http" . "127.0.0.1:7890")
;;   ("https" . "127.0.0.1:7890")
;;   ("socks5" . "127.0.0.1:7890")))
;; )

;; è®¾ç½®ç¼–ç 
(setq default-buffer-file-coding-system 'utf-8)
(prefer-coding-system 'utf-8)
#+END_SRC

* Emacs Version --27.2
* ä¾èµ–
** org-roam ä¾èµ– pkg install clang sqlite3(ç†è®ºä¸Šåªå®‰è£…clangå³å¯)
** all-the-icons å­—ä½“ï¼Œè¯·åœ¨ç³»ç»Ÿä¸Šå®‰è£…ä»¥æ”¯æŒå›¾æ ‡(~/.emacs.d/font)
** nov é˜…è¯»ä¹¦ unip (libxml2 æ²¡å®‰è£…è¿‡)
* Home
** åŸºæœ¬è®¾ç½®
#+BEGIN_SRC emacs-lisp
;; è®¾ç½®Emacsæ ‡é¢˜
(setq frame-title-format '("Happy Emacs - %b")
      icon-title-format frame-title-format)
;; æ˜¾ç¤ºç”µæ± 
(display-battery-mode 1)
;;æ˜¾ç¤ºè¡Œå·
;; (global-linum-mode 1)
;; ç›¸å¯¹è¡Œå·
;; (linum-relative-global-mode t)
;;é«˜äº®å½“å‰è¡Œ
(global-hl-line-mode 1)
;;å…³é—­å¯åŠ¨ç”»é¢
(setq inhibit-startup-message t)
;;è‡ªåŠ¨æ¢è¡Œ
;;(add-hook 'org-mode-hook (lambda () (setq truncate-lines nil)))
(setq toggle-truncate-lines t)

;;æ˜¾ç¤ºæ—¶é—´
(display-time-mode 1) ;; å¸¸æ˜¾
(setq display-time-24hr-format t) ;;æ ¼å¼
(setq display-time-day-and-date t) ;;æ˜¾ç¤ºæ—¶é—´ã€æ˜ŸæœŸã€æ—¥æœŸ


;; å…³é—­å¯åŠ¨å¸®åŠ©ç”»é¢
(setq inhibit-splash-screen 1)

;; å…³é—­å¤‡ä»½æ–‡ä»¶
(setq make-backup-files nil)

;; è‡ªåŠ¨åŠ è½½å¤–éƒ¨ä¿®æ”¹çš„æ–‡ä»¶
(global-auto-revert-mode 1)

;; å…³é—­è‡ªåŠ¨ä¿å­˜æ–‡ä»¶
(setq auto-save-default t)
;; å…³é—­è­¦å‘Šå£°
(setq ring-bell-function 'ignore)

;; ç®€åŒ–yeså’Œno
(fset 'yes-or-no-p 'y-or-n-p)

;;éšè—èœå•æ å·¥å…·æ æ»šåŠ¨æ¡
(menu-bar-mode 0)
(when (string= "windows-nt" system-type)
(tool-bar-mode 0)
;; æ»šåŠ¨æ¡
(scroll-bar-mode 0)
)
(when (string= "darwin" system-type)
(tool-bar-mode 1)
(menu-bar-mode 1)
)

(when (string= "windows-nt" system-type)
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:family "Courier New" :foundry "outline" :slant normal :weight normal :height 129 :width normal)))))
)
(when (string= "darwin" system-type)
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:family "Courier New" :foundry "outline" :slant normal :weight normal :height 195 :width normal)))))
)
#+END_SRC

** æ’ä»¶
*** use-package and straight
#+BEGIN_SRC emacs-lisp
;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; åŒ…å¼€å§‹
(package-initialize)
(add-to-list 'load-path "~/.emacs.d/lisp/")

(require 'package)
(add-to-list 'package-archives
			 '("melpa" . "https://melpa.org/packages/")
			 '("melpa-stable" . "https://stable.melpa.org/packages/")
)
(when (not (package-installed-p 'use-package))
  (package-refresh-contents)
  (package-install 'use-package))

 ;; This is only needed once, near the top of the file
(eval-when-compile
	;; Following line is not needed if use-package.el is in ~/.emacs.d
	;;(add-to-list 'load-path "~/.emacs.d/plugins/use-package")
(require 'use-package))
(require 'use-package-ensure)
;; è‡ªåŠ¨ä¸‹è½½ï¼Œä¸éœ€è¦ :straight t
(setq use-package-always-ensure t)


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; æ·»åŠ  straight ä¸ use-package åŒæ—¶é€šç”¨
(defvar bootstrap-version)
(let ((bootstrap-file
       (expand-file-name "straight/repos/straight.el/bootstrap.el" user-emacs-directory))
      (bootstrap-version 5))
  (unless (file-exists-p bootstrap-file)
    (with-current-buffer
        (url-retrieve-synchronously
         "https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"
         'silent 'inhibit-cookies)
      (goto-char (point-max))
      (eval-print-last-sexp)))
  (load bootstrap-file nil 'nomessage))
;; ;; ç¦æ­¢ç¼–è¯‘
(setq straight-disable-compile t)
(setq straight-disable-native-compile t)
(straight-use-package 'use-package)


;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;
;; ;; Install straight.el
;; (defvar bootstrap-version)
;; (let ((bootstrap-file
;;        (expand-file-name "straight/repos/straight.el/bootstrap.el" user-emacs-directory))
;;       (bootstrap-version 5))
;;   (unless (file-exists-p bootstrap-file)
;;     (with-current-buffer
;;         (url-retrieve-synchronously
;;          "https://raw.githubusercontent.com/raxod502/straight.el/develop/install.el"
;;          'silent 'inhibit-cookies)
;;       (goto-char (point-max))
;;       (eval-print-last-sexp)))
;;   (load bootstrap-file nil 'nomessage))

;; ;; Install use-package
;; (straight-use-package 'use-package)
;;
;; ;; Configure use-package to use straight.el by default
;; (use-package straight
;;              :custom (straight-use-package-by-default t))
;; ;; (eval-when-compile
;; ;;     (require 'use-package))
;; ;; ç¦æ­¢ç¼–è¯‘
;; (setq straight-disable-compile t)
;; (setq straight-disable-native-compile t)
#+END_SRC
*** ä¸­æ–‡ä¹±ç è®¾ç½®
#+BEGIN_SRC elisp 
(use-package init-Chinese
:straight nil
:defer 1
:load-path "~/.emacs.d/lisp"
)
#+END_SRC

*** ä¸­æ–‡æ—¥å†
#+BEGIN_SRC elisp 
(use-package cal-china-x
:straight nil
:defer 1
:load-path "~/.emacs.d/lisp"
)
#+END_SRC

*** meow çŒ«æ€ç¼–è¾‘
#+BEGIN_SRC elisp 
;; (use-package meow
;; :straight t
;; :config
;; (meow-global-mode 1)
;; (defun meow-setup ()
;;   (setq meow-cheatsheet-layout meow-cheatsheet-layout-qwerty)
;;   (meow-motion-overwrite-define-key
;;    '("j" . meow-next)
;;    '("k" . meow-prev)
;;    '("<escape>" . ignore))
;;   (meow-leader-define-key
;;    ;; SPC j/k will run the original command in MOTION state.
;;    '("j" . "H-j")
;;    '("k" . "H-k")
;;    ;; Use SPC (0-9) for digit arguments.
;;    '("1" . meow-digit-argument)
;;    '("2" . meow-digit-argument)
;;    '("3" . meow-digit-argument)
;;    '("4" . meow-digit-argument)
;;    '("5" . meow-digit-argument)
;;    '("6" . meow-digit-argument)
;;    '("7" . meow-digit-argument)
;;    '("8" . meow-digit-argument)
;;    '("9" . meow-digit-argument)
;;    '("0" . meow-digit-argument)
;;    '("/" . meow-keypad-describe-key)
;;    '("?" . meow-cheatsheet))
;;   (meow-normal-define-key
;;    '("0" . meow-expand-0)
;;    '("9" . meow-expand-9)
;;    '("8" . meow-expand-8)
;;    '("7" . meow-expand-7)
;;    '("6" . meow-expand-6)
;;    '("5" . meow-expand-5)
;;    '("4" . meow-expand-4)
;;    '("3" . meow-expand-3)
;;    '("2" . meow-expand-2)
;;    '("1" . meow-expand-1)
;;    '("-" . negative-argument)
;;    '(";" . meow-reverse)
;;    '("," . meow-inner-of-thing)
;;    '("." . meow-bounds-of-thing)
;;    '("[" . meow-beginning-of-thing)
;;    '("]" . meow-end-of-thing)
;;    '("a" . meow-append)
;;    '("A" . meow-open-below)
;;    '("b" . meow-back-word)
;;    '("B" . meow-back-symbol)
;;    '("c" . meow-change)
;;    '("d" . meow-delete)
;;    '("D" . meow-backward-delete)
;;    '("e" . meow-next-word)
;;    '("E" . meow-next-symbol)
;;    '("f" . meow-find)
;;    '("F" . avy-goto-char)
;;    '("g" . meow-cancel-selection)
;;    '("G" . meow-grab)
;;    '("h" . meow-left)
;;    '("H" . meow-left-expand)
;;    '("i" . meow-insert)
;;    '("I" . meow-open-above)
;;    '("j" . meow-next)
;;    '("J" . meow-next-expand)
;;    '("k" . meow-prev)
;;    '("K" . meow-prev-expand)
;;    '("l" . meow-right)
;;    '("L" . meow-right-expand)
;;    '("m" . meow-join)
;;    '("n" . meow-search)
;;    '("o" . meow-block)
;;    '("O" . meow-to-block)
;;    '("p" . meow-yank)
;;    '("q" . meow-quit)
;;    '("Q" . goto-line-preview)
;;    '("r" . meow-replace)
;;    '("R" . meow-swap-grab)
;;    '("s" . meow-kill)
;;    '("t" . meow-till)
;;    '("u" . meow-undo)
;;    '("U" . meow-undo-in-selection)
;;    '("v" . meow-visit)
;;    '("w" . meow-mark-word)
;;    '("W" . meow-mark-symbol)
;;    '("x" . meow-line)
;;    '("X" . goto-line-preview)
;;    '("y" . meow-save)
;;    '("Y" . meow-sync-grab)
;;    '("z" . meow-pop-selection)
;;    '("'" . repeat)
;;    '("<escape>" . ignore))
;; (meow-define-keys
;;  ;; state
;;  'normal
;;  ;; bind to a command
;;  )
;; (define-key meow-normal-state-keymap (kbd "C-w j") 'windmove-down)
;; (define-key meow-normal-state-keymap (kbd "C-w k") 'windmove-up)
;; (define-key meow-normal-state-keymap (kbd "C-w h") 'windmove-left)
;; (define-key meow-normal-state-keymap (kbd "C-w l") 'windmove-right)
;; (define-key meow-normal-state-keymap (kbd "C-w s") 'split-window-below)
;; (define-key meow-normal-state-keymap (kbd "C-w v") 'split-window-right)
;;
;;    )
;; (meow-setup)
;; ;; åœ¨è¿™ä¸¤ä¸ªæ¨¡å¼æ˜¾ç¤ºæ•°å­—è·³è·ƒ
;; (setq meow-expand-exclude-mode-list '(
;;     (markdown-mode)
;;     (org-mode)
;; ))
;; ;; æ•°å­—æ˜¾ç¤ºåœç•™æ—¶é—´
;; (setq meow-expand-hint-remove-delay 3)
;; ;; ä½¿ç”¨ç³»ç»Ÿå‰ªè´´æ¿
;; (setq meow-use-clipboard t)
;;
;; )
#+END_SRC
*** eaf
#+BEGIN_SRC elisp
(if (display-graphic-p)
    ;; GUI ä»£ç æ”¾ç½®ï¼Œå¤šè¡Œä»£ç çš„è¯ç”¨ (progn) åŒ…ä¸€ä¸‹
(progn
(defun eaf-start ()
(interactive)
  ;; Windows only configuration.
(add-to-list 'load-path "~/.emacs.d/plugins/site-lisp/emacs-application-framework/")
(require 'eaf)
(require 'eaf-browser)
(require 'eaf-music-player)

(setq eaf-browser-enable-adblocker t)
(setq eaf-proxy-type "socks5")
(setq eaf-proxy-host "127.0.0.1")
(when (string= "windows-nt" system-type)
(setq eaf-proxy-port "7890")
)
(when (string= "gnu/linux" system-type)
(setq eaf-proxy-port "7891")
)
(when (string= "darwin" system-type)
(setq eaf-proxy-port "7890")
)
)
)
)
#+END_SRC

*** helm
#+BEGIN_SRC emacs-lisp
(use-package helm
  :straight t
  :defer 1
  :config
  (require 'helm)
  :bind (("M-x" . helm-M-x)
         ("C-x C-f" . helm-find-files))
  )
#+END_SRC

*** indent-guide æŒ‡å¯¼çº¿
#+BEGIN_SRC elisp 
;; indent-guide æŒ‡å¯¼çº¿
(use-package indent-guide
:defer 3
:straight nil
:load-path "~/.emacs.d/lisp/plugins"
:config
(require 'indent-guide)
(indent-guide-global-mode)
;; (set-face-background 'indent-guide-face "dimgray")
(setq indent-guide-delay 0.1)
;; (setq indent-guide-char ":")
(setq indent-guide-recursive t)
)
#+END_SRC

*** monokai or dracula ä¸»é¢˜ 
#+BEGIN_SRC emacs-lisp
;;(use-package dracula-theme
;;:load-path "~/.emacs.d/lisp"
;;:config
;;(load-theme 'dracula t)
;;)
(use-package monokai-theme
:straight nil
:load-path "~/.emacs.d/lisp"
:config
(load-theme 'monokai t)
;; (setq day-theme 'leuven)
;; (setq dark-theme 'monokai)
;; (defun synchronize-theme ()
;;     (setq hour
;;         (string-to-number
;;             (substring (current-time-string) 11 13)))
;;     (if (member hour (number-sequence 6 18))
;;         (setq now day-theme)
;;         (setq now dark-theme))
;;     (load-theme now)
;; )
;; (run-with-timer 0 3600 'synchronize-theme)
)
;; (use-package zenburn-theme
;; :straight nil
;; :load-path "~/.emacs.d/lisp"
;; :config
;; (load-theme 'zenburn t)
;; ;; use variable-pitch fonts for some headings and titles
;; (setq zenburn-use-variable-pitch t)

;; ;; scale headings in org-mode
;; (setq zenburn-scale-org-headlines t)

;; ;; scale headings in outline-mode
;; (setq zenburn-scale-outline-headlines t)
;; )
#+END_SRC

*** doom-modeline
#+BEGIN_SRC elisp 
(use-package doom-modeline
:straight t
:defer 1
;; :init (doom-modeline-mode 1)
:config
(doom-modeline-mode 1)

;; If non-nil, cause imenu to see `doom-modeline' declarations.
;; This is done by adjusting `lisp-imenu-generic-expression' to
;; include support for finding `doom-modeline-def-*' forms.
;; Must be set before loading doom-modeline.
(setq doom-modeline-support-imenu t)

;; How tall the mode-line should be. It's only respected in GUI.
;; If the actual char height is larger, it respects the actual height.
(setq doom-modeline-height 15)

;; How wide the mode-line bar should be. It's only respected in GUI.
(setq doom-modeline-bar-width 4)

;; Whether to use hud instead of default bar. It's only respected in GUI.
(setq doom-modeline-hud nil)

;; The limit of the window width.
;; If `window-width' is smaller than the limit, some information won't be
;; displayed. It can be an integer or a float number. `nil' means no limit."
(setq doom-modeline-window-width-limit 0.25)

;; How to detect the project root.
;; nil means to use `default-directory'.
;; The project management packages have some issues on detecting project root.
;; e.g. `projectile' doesn't handle symlink folders well, while `project' is unable
;; to hanle sub-projects.
;; You can specify one if you encounter the issue.
(setq doom-modeline-project-detection 'auto)

;; Determines the style used by `doom-modeline-buffer-file-name'.
;;
;; Given ~/Projects/FOSS/emacs/lisp/comint.el
;;   auto => emacs/lisp/comint.el (in a project) or comint.el
;;   truncate-upto-project => ~/P/F/emacs/lisp/comint.el
;;   truncate-from-project => ~/Projects/FOSS/emacs/l/comint.el
;;   truncate-with-project => emacs/l/comint.el
;;   truncate-except-project => ~/P/F/emacs/l/comint.el
;;   truncate-upto-root => ~/P/F/e/lisp/comint.el
;;   truncate-all => ~/P/F/e/l/comint.el
;;   truncate-nil => ~/Projects/FOSS/emacs/lisp/comint.el
;;   relative-from-project => emacs/lisp/comint.el
;;   relative-to-project => lisp/comint.el
;;   file-name => comint.el
;;   buffer-name => comint.el<2> (uniquify buffer name)
;;
;; If you are experiencing the laggy issue, especially while editing remote files
;; with tramp, please try `file-name' style.
;; Please refer to https://github.com/bbatsov/projectile/issues/657.
(setq doom-modeline-buffer-file-name-style 'auto)

;; Whether display icons in the mode-line.
;; While using the server mode in GUI, should set the value explicitly.
(setq doom-modeline-icon (display-graphic-p))

;; Whether display the icon for `major-mode'. It respects `doom-modeline-icon'.
(setq doom-modeline-major-mode-icon t)

;; Whether display the colorful icon for `major-mode'.
;; It respects `all-the-icons-color-icons'.
(setq doom-modeline-major-mode-color-icon t)

;; Whether display the icon for the buffer state. It respects `doom-modeline-icon'.
(setq doom-modeline-buffer-state-icon t)

;; Whether display the modification icon for the buffer.
;; It respects `doom-modeline-icon' and `doom-modeline-buffer-state-icon'.
(setq doom-modeline-buffer-modification-icon t)

;; Whether to use unicode as a fallback (instead of ASCII) when not using icons.
(setq doom-modeline-unicode-fallback nil)

;; Whether display the buffer name.
(setq doom-modeline-buffer-name t)

;; Whether display the minor modes in the mode-line.
(setq doom-modeline-minor-modes nil)

;; If non-nil, a word count will be added to the selection-info modeline segment.
(setq doom-modeline-enable-word-count nil)

;; Major modes in which to display word count continuously.
;; Also applies to any derived modes. Respects `doom-modeline-enable-word-count'.
;; If it brings the sluggish issue, disable `doom-modeline-enable-word-count' or
;; remove the modes from `doom-modeline-continuous-word-count-modes'.
(setq doom-modeline-continuous-word-count-modes '(markdown-mode gfm-mode org-mode))

;; Whether display the buffer encoding.
(setq doom-modeline-buffer-encoding t)

;; Whether display the indentation information.
(setq doom-modeline-indent-info nil)

;; If non-nil, only display one number for checker information if applicable.
(setq doom-modeline-checker-simple-format t)

;; The maximum number displayed for notifications.
(setq doom-modeline-number-limit 99)

;; The maximum displayed length of the branch name of version control.
(setq doom-modeline-vcs-max-length 12)

;; Whether display the workspace name. Non-nil to display in the mode-line.
(setq doom-modeline-workspace-name t)

;; Whether display the perspective name. Non-nil to display in the mode-line.
(setq doom-modeline-persp-name t)

;; If non nil the default perspective name is displayed in the mode-line.
(setq doom-modeline-display-default-persp-name nil)

;; If non nil the perspective name is displayed alongside a folder icon.
(setq doom-modeline-persp-icon t)

;; Whether display the `lsp' state. Non-nil to display in the mode-line.
(setq doom-modeline-lsp t)

;; Whether display the GitHub notifications. It requires `ghub' package.
(setq doom-modeline-github nil)

;; The interval of checking GitHub.
(setq doom-modeline-github-interval (* 30 60))

;; Whether display the modal state icon.
;; Including `evil', `overwrite', `god', `ryo' and `xah-fly-keys', etc.
(setq doom-modeline-modal-icon t)

;; Whether display the mu4e notifications. It requires `mu4e-alert' package.
(setq doom-modeline-mu4e nil)
;; also enable the start of mu4e-alert
;; (mu4e-alert-enable-mode-line-display)

;; Whether display the gnus notifications.
(setq doom-modeline-gnus t)

;; Whether gnus should automatically be updated and how often (set to 0 or smaller than 0 to disable)
(setq doom-modeline-gnus-timer 2)

;; Wheter groups should be excludede when gnus automatically being updated.
(setq doom-modeline-gnus-excluded-groups '("dummy.group"))

;; Whether display the IRC notifications. It requires `circe' or `erc' package.
(setq doom-modeline-irc t)

;; Function to stylize the irc buffer names.
(setq doom-modeline-irc-stylize 'identity)

;; Whether display the environment version.
(setq doom-modeline-env-version t)
;; Or for individual languages
(setq doom-modeline-env-enable-python t)
(setq doom-modeline-env-enable-ruby t)
(setq doom-modeline-env-enable-perl t)
(setq doom-modeline-env-enable-go t)
(setq doom-modeline-env-enable-elixir t)
(setq doom-modeline-env-enable-rust t)

;; Change the executables to use for the language version string
(setq doom-modeline-env-python-executable "python") ; or `python-shell-interpreter'
(setq doom-modeline-env-ruby-executable "ruby")
(setq doom-modeline-env-perl-executable "perl")
(setq doom-modeline-env-go-executable "go")
(setq doom-modeline-env-elixir-executable "iex")
(setq doom-modeline-env-rust-executable "rustc")

;; What to display as the version while a new one is being loaded
(setq doom-modeline-env-load-string "...")

;; Hooks that run before/after the modeline version string is updated
(setq doom-modeline-before-update-env-hook nil)
(setq doom-modeline-after-update-env-hook nil)
)
#+END_SRC

*** awesome-tray modeline
#+BEGIN_SRC elisp
;; (use-package awesome-tray
;; :defer 3
;; :straight nil
;; :load-path "~/.emacs.d/lisp"
;; :config
;; (awesome-tray-mode 1)
;; ;; é«˜åº¦
;; (setq awesome-tray-mode-line-height 0.3)
;; ;; å¯ç”¨é‚£äº›æ˜¾ç¤º
;; (setq awesome-tray-active-modules
;; '("evil" "mode-name" "input-method" "file-path" "buffer-name" "circe" "location" "clock" "git" "battery" "buffer-read-only" "date")
;; )
;; ;; input-method æ¨¡å¼å›¾æ ‡
;; (setq awesome-tray-input-method-zh-style "ã„“")
;; ;; çŠ¶æ€æ æ›´æ–°æ—¶é—´
;; (setq awesome-tray-refresh-idle-delay 0.1)
;; )
#+END_SRC 

*** Evil-mode and evil-escape
#+BEGIN_SRC emacs-lisp
(use-package evil-escape
:straight t
:defer 0.5
:config
(setq-default evil-escape-key-sequence "jk")
(setq-default evil-escape-delay 0.2)
:hook (text-mode . evil-escape-mode)
)
(evil-escape-mode 1)
(use-package evil
  :straight t
  :defer 0.6
  :config
  (require 'evil)
  (evil-mode 1)
  ;; (setq
  ;;   evil-normal-state-tag (propertize " <N> " 'face '((:background "#808000" :foreground "#efefef")))
  ;;   evil-emacs-state-tag (propertize " <E> " 'face '((:background "green" :foreground "black"))))
  ;;   evil-visual-state-tag (propertize " <V> " 'face '((:background "#00ffff" :foreground "#efefef")))
  )
#+END_SRC

*** evil-nerd-commenter æ³¨é‡Š
#+BEGIN_SRC emacs-lisp
(use-package evil-nerd-commenter
:straight t
:defer 2)
#+END_SRC

*** dashboard å¯åŠ¨ç•Œé¢ ä¾èµ–å­—ä½“ all-the-icons è¯·åœ¨ç³»ç»Ÿä¸Šå®‰è£…
#+BEGIN_SRC emacs-lisp
(use-package all-the-icons
:straight t) ;; GUI æ”¯æŒ æ‡’åŠ è½½
(use-package dashboard
    :straight t
    :diminish dashboard-mode
    :config
    ;; ä¾èµ–æœ€è¿‘æ–‡ä»¶
    (recentf-mode 1)
    ;; (add-hook 'dashboard-mode-hook '(lambda () (evil-insert 1)))
    (setq recentf-max-menu-items 20)
    (setq recentf-max-saved-items 20)
    ;; æ ‡é¢˜
    (setq dashboard-banner-logo-title "Wecome to Emacs")
    ;; Logo å›¾æ ‡ è·¯å¾„
    (if (display-graphic-p)
    ;; GUI ä»£ç æ”¾ç½®ï¼Œå¤šè¡Œä»£ç çš„è¯ç”¨ (progn) åŒ…ä¸€ä¸‹
        (setq dashboard-startup-banner "~/.emacs.d/logo.png")
    ;; TUI ä»£ç æ”¾ç½®
        (setq dashboard-startup-banner "~/.emacs.d/logo.txt"))
    ;; å¯¼èˆªç›®å½•
    (setq dashboard-items '(
                            ;; (agenda . 5)
                            (recents  . 15)
                            (bookmarks . 10)
                            ;;(projects . 5)
                            ;;(registers . 5)
                            ))
    ;; ä½¿ç”¨å›¾æ ‡
    (setq dashboard-set-heading-icons t)
    (setq dashboard-set-file-icons t)
    ;; å›¾æ ‡æ›´æ¢
    (dashboard-modify-heading-icons '((recents . "file-text")
                                  (bookmarks . "book")))
    ;; æ˜¾ç¤ºè¢«åŠ è½½çš„åŒ…çš„ä¿¡æ¯å’Œåˆå§‹åŒ–æ—¶é—´:
    (setq dashboard-set-init-info t)
    ;; æ­¤å¤–ï¼Œæ¶ˆæ¯å¯ä»¥è¿™æ ·å®šåˆ¶:
    ;; (setq dashboard-init-info "This is an init message!")
    ;; æœ€ä¸‹é¢çš„ä»ªè¡¨ç›˜
    (setq dashboard-footer-messages '("Freedom and PeaceğŸ™Œ"))
    (setq dashboard-footer-icon (all-the-icons-octicon "dashboard"
                                                   :height 1.1
                                                   :v-adjust -0.05
                                                   :face 'font-lock-keyword-face))
    ;; åœ¨æ¨ªå¹…ä¸‹é¢æ˜¾ç¤ºå¯¼èˆªå™¨:
    (setq dashboard-set-navigator t)
    ;; Format: "(icon title help action face prefix suffix)"
    (setq dashboard-navigator-buttons
      `(;; line1
        ((,(all-the-icons-octicon "mark-github" :height 1.1 :v-adjust 0.0)
         "Homepage"
         "Browse homepage"
         (lambda (&rest _) (browse-url "https://github.com/ISouthRain")))
        ("â˜…ğŸ´" "Start" "Show stars" (lambda (&rest _) (my-config-start)) warning)
        ("?" "" "?/h" #'show-help nil "<" ">"))
         ;; line 2
        ((,(all-the-icons-faicon "linkedin" :height 1.1 :v-adjust 0.0)
          "Linkedin"
          ""
          (lambda (&rest _) (browse-url "homepage")))
         ("âš‘" nil "Show flags" (lambda (&rest _) (message "flag")) error))))
    (dashboard-setup-startup-hook)

    (defun open-dashboard ()
      "Open the *dashboard* buffer and jump to the first widget."
      (interactive)
      ;; Check if need to recover layout
      (if (> (length (window-list-1))
             ;; exclude `treemacs' window
             (if (and (fboundp 'treemacs-current-visibility)
                      (eq (treemacs-current-visibility) 'visible))
                 2
               1))
          (setq dashboard-recover-layout-p t))

      (delete-other-windows)

      ;; Refresh dashboard buffer
      (when (get-buffer dashboard-buffer-name)
        (kill-buffer dashboard-buffer-name))
      (dashboard-insert-startupify-lists)
      (switch-to-buffer dashboard-buffer-name)

      ;; Jump to the first section
      (dashboard-goto-recent-files)
      (evil-insert 1))

    (defun dashboard-goto-recent-files ()
      "Go to recent files."
      (interactive)
      (let ((func (local-key-binding "r")))
        (and func (funcall func))))
)

(global-set-key (kbd "<f2>") 'open-dashboard)
#+END_SRC

*** rainbow-delimiters å½©è™¹æ‹¬å· 
#+BEGIN_SRC emacs-lisp
(use-package rainbow-delimiters
:straight t
:hook (prog-mode . rainbow-delimiters-mode)
)
;; (add-hook 'prog-mode-hook #'rainbow-delimiters-mode)
#+END_SRC

*** autopair æ‹¬å·è¡¥å…¨
#+BEGIN_SRC elisp
(use-package autopair
:defer 1
:straight nil
:load-path "~/.emacs.d/lisp"
:config
(autopair-global-mode)
)
#+END_SRC 
*** general é”®ç»‘å®š
#+BEGIN_SRC emacs-lisp
(use-package general
  :straight t
  :defer 2
  :config
  (require 'general)
  ;; (general-create-definer my-leader-def
  ;; ;; :prefix my-leader
  ;; :prefix "SPC")
  ;; (general-create-definer my-emacs-def
  ;; :prefix "C-c")
  )
#+END_SRC

*** which-key
#+BEGIN_SRC emacs-lisp
(use-package which-key
:straight t
:defer 2
:config
(require 'which-key)
(which-key-mode)
(which-key-setup-side-window-bottom)
(which-key-enable-god-mode-support)
)
#+END_SRC

*** company è¡¥å…¨
#+BEGIN_SRC emacs-lisp
(use-package company
:straight t
:defer 3
:hook (after-init . global-company-mode)
:config
  :bind (
         :map company-mode-map
         ("<backtab>" . company-yasnippet)
         :map company-active-map
         ("C-p" . company-select-previous)
         ("C-n" . company-select-next)
         ("<tab>" . company-complete-common-or-cycle)
         ("<backtab>" . my-company-yasnippet)
         :map company-search-map
         ("C-p" . company-select-previous)
         ("C-n" . company-select-next))
  :init
  (setq company-tooltip-align-annotations t
        company-tooltip-limit 12
        company-idle-delay 0
        company-echo-delay (if (display-graphic-p) nil 0)
        company-minimum-prefix-length 1
        company-icon-margin 3
        company-require-match nil
        company-dabbrev-ignore-case nil
        company-dabbrev-downcase nil
        company-global-modes '(not erc-mode message-mode help-mode
                                   gud-mode eshell-mode shell-mode)
        company-backends '((company-capf :with company-yasnippet)
                           (company-dabbrev-code company-keywords company-files)
                           company-dabbrev))
)
  ;; Better sorting
(use-package prescient
  :straight t
  :defer 3
  :commands prescient-persist-mode
  :init (prescient-persist-mode 1))
(use-package company-prescient
  :straight t
  :defer 3
  :init (company-prescient-mode 1))

  ;; Icons and quickhelp
;; (use-package company-box
;;   :diminish
;;   :defines company-box-icons-all-the-icons
;;   :hook (company-mode . company-box-mode)
;;   :init (setq company-box-enable-icon centaur-icon
;;               company-box-backends-colors nil
;;               company-box-doc-delay 0.1
;;               company-box-scrollbar 'right))

#+END_SRC

*** go-translate ç¿»è¯‘
#+BEGIN_SRC emacs-lisp
(use-package go-translate
:straight t
:defer 3
:config
(require 'go-translate)
;; é…ç½®å¤šä¸ªç¿»è¯‘è¯­è¨€å¯¹
(setq gts-translate-list '(("en" "zh") ("fr" "zh")))
;; è®¾ç½®ä¸º t å…‰æ ‡è‡ªåŠ¨è·³è½¬åˆ°buffer
(setq gts-buffer-follow-p t)
;; é…ç½®é»˜è®¤çš„ translator
;; è¿™äº›é…ç½®å°†è¢« gts-do-translate å‘½ä»¤ä½¿ç”¨
(setq gts-default-translator
      (gts-translator

       :picker ; ç”¨äºæ‹¾å–åˆå§‹æ–‡æœ¬ã€fromã€toï¼Œåªèƒ½é…ç½®ä¸€ä¸ª

       (gts-noprompt-picker) ;; æˆåŠŸæ¡ˆä¾‹
       ;;(gts-noprompt-picker :texter (gts-whole-buffer-texter))
       ;;(gts-prompt-picker)
       ;;(gts-prompt-picker :single t)
       ;;(gts-prompt-picker :texter (gts-current-or-selection-texter) :single t)

       :engines ; ç¿»è¯‘å¼•æ“ï¼Œå¯ä»¥é…ç½®å¤šä¸ªã€‚å¦å¤–å¯ä»¥ä¼ å…¥ä¸åŒçš„ Parser ä»è€Œä½¿ç”¨ä¸åŒæ ·å¼çš„è¾“å‡º

       (list
        ;;(gts-bing-cn-engine)
        ;;(gts-google-engine)
        (gts-google-rpc-engine) ;; æˆåŠŸæ¡ˆä¾‹
        ;;(gts-deepl-engine :auth-key [YOUR_AUTH_KEY] :pro nil)
        ;;(gts-google-engine :parser (gts-google-summary-parser))
        ;;(gts-google-engine :parser (gts-google-parser))
        ;;(gts-google-rpc-engine :parser (gts-google-rpc-summary-parser))
        ;;(gts-google-rpc-engine :parser (gts-google-rpc-parser))
	;;(gts-google-rpc-engine :parser (gts-google-rpc-summary-parser))
        )

       :render ; æ¸²æŸ“å™¨ï¼Œåªèƒ½ä¸€ä¸ªï¼Œç”¨äºè¾“å‡ºç»“æœåˆ°æŒ‡å®šç›®æ ‡ã€‚å¦‚æœä½¿ç”¨ childframe ç‰ˆæœ¬çš„ï¼Œéœ€è‡ªè¡Œå®‰è£… posframe

       (gts-buffer-render) ;; æˆåŠŸæ¡ˆä¾‹
       ;; (gts-posframe-pop-render)
       ;; (gts-posframe-pop-render :backcolor "#333333" :forecolor "#ffffff")
       ;; (gts-posframe-pin-render)
       ;;(gts-posframe-pin-render :position (cons 1200 20))
       ;; (gts-posframe-pin-render :width 80 :height 25 :position (cons 1000 20) :forecolor "#ffffff" :backcolor "#111111")
       ;;(gts-kill-ring-render)
       ;;(your-render)
       ))


(defun gts-do-translate-my ()
(interactive)
(if (display-graphic-p)
    (if (posframe-workable-p)
        (setq gts-default-translator
              (gts-translator
               :picker ; ç”¨äºæ‹¾å–åˆå§‹æ–‡æœ¬ã€fromã€toï¼Œåªèƒ½é…ç½®ä¸€ä¸ª
               (gts-noprompt-picker) ;; æˆåŠŸæ¡ˆä¾‹
               :engines ; ç¿»è¯‘å¼•æ“ï¼Œå¯ä»¥é…ç½®å¤šä¸ªã€‚å¦å¤–å¯ä»¥ä¼ å…¥ä¸åŒçš„ Parser ä»è€Œä½¿ç”¨ä¸åŒæ ·å¼çš„è¾“å‡º
               (list
                (gts-google-rpc-engine) ;; æˆåŠŸæ¡ˆä¾‹
                 )
               :render ; æ¸²æŸ“å™¨ï¼Œåªèƒ½ä¸€ä¸ªï¼Œç”¨äºè¾“å‡ºç»“æœåˆ°æŒ‡å®šç›®æ ‡ã€‚å¦‚æœä½¿ç”¨ childframe ç‰ˆæœ¬çš„ï¼Œéœ€è‡ªè¡Œå®‰è£… posframe
               ;; (gts-buffer-render) ;; æˆåŠŸæ¡ˆä¾‹
               (gts-posframe-pop-render)
               ;;(gts-kill-ring-render)
               ;;(your-render)
               )))
    (setq gts-default-translator
          (gts-translator
           :picker ; ç”¨äºæ‹¾å–åˆå§‹æ–‡æœ¬ã€fromã€toï¼Œåªèƒ½é…ç½®ä¸€ä¸ª
           (gts-noprompt-picker) ;; æˆåŠŸæ¡ˆä¾‹
           :engines ; ç¿»è¯‘å¼•æ“ï¼Œå¯ä»¥é…ç½®å¤šä¸ªã€‚å¦å¤–å¯ä»¥ä¼ å…¥ä¸åŒçš„ Parser ä»è€Œä½¿ç”¨ä¸åŒæ ·å¼çš„è¾“å‡º
           (list
            (gts-google-rpc-engine) ;; æˆåŠŸæ¡ˆä¾‹
             )
           :render ; æ¸²æŸ“å™¨ï¼Œåªèƒ½ä¸€ä¸ªï¼Œç”¨äºè¾“å‡ºç»“æœåˆ°æŒ‡å®šç›®æ ‡ã€‚å¦‚æœä½¿ç”¨ childframe ç‰ˆæœ¬çš„ï¼Œéœ€è‡ªè¡Œå®‰è£… posframe
           (gts-buffer-render) ;; æˆåŠŸæ¡ˆä¾‹
           ;; (gts-posframe-pop-render)
           ;;(gts-kill-ring-render)
           ;;(your-render)
	   ))
)
(gts-do-translate)
)
)

#+END_SRC

*** sdcv ç¿»è¯‘
#+BEGIN_SRC elisp

(use-package sdcv
:defer 3
:straight nil
:load-path "~/.emacs.d/lisp"
:config
;; ç¿»è¯‘åæ˜¯å¦è¯´è¯
(setq sdcv-say-word-p nil)
(setq sdcv-dictionary-data-dir "/data/data/com.termux/files/home/.stardict/dic")
(setq sdcv-dictionary-simple-list    ;setup dictionary list for simple search
      '(
        "æ‡’è™«ç®€æ˜è‹±æ±‰è¯å…¸"
        "æ‡’è™«ç®€æ˜æ±‰è‹±è¯å…¸"
	"è®¡ç®—æœºè¯æ±‡"
	))
(setq sdcv-dictionary-complete-list     ;setup dictionary list for complete search
      '(
        "æ‡’è™«ç®€æ˜è‹±æ±‰è¯å…¸"
	"æ‡’è™«ç®€æ˜æ±‰è‹±è¯å…¸"
	"ç‰›æ´¥é«˜é˜¶è‹±æ±‰åŒè§£"
	))
  (defun sdcv-search-pointer-my ()
  (interactive)
  (if (display-graphic-p)
      (if (posframe-workable-p)
	  (sdcv-search-pointer+))
      (sdcv-search-pointer)
      )
 )
)

;; è¾“å…¥ä¸­æ–‡åè‡ªåŠ¨ç¿»è¯‘
(use-package insert-translated-name
:defer 3
:straight nil
:load-path "~/.emacs.d/lisp"
:config
)

;; å¯¹è‹±æ–‡å•è¯ç¼–å†™è¿›è¡Œæç¤º
(use-package company-english-helper
:straight nil
:defer 6
:load-path "~/.emacs.d/lisp"
)
#+END_SRC
*** neotree æ–‡ä»¶æµè§ˆå™¨
#+BEGIN_SRC emacs-lisp
(use-package neotree
:straight t
:defer 3)
#+END_SRC

*** goto-line-preview æå‰æ˜¾ç¤ºè¦åˆ°è¾¾çš„è¡Œå·
#+BEGIN_SRC emacs-lisp
(use-package goto-line-preview
:straight t
:defer 3)
#+END_SRC

*** è¡¨æƒ…ç¬¦å· emojify
#+BEGIN_SRC elisp 
(use-package emojify
  :straight t
  :defer 5
  :hook (after-init . global-emojify-mode))
#+END_SRC

*** centaur-tabs æ ‡ç­¾æ 
#+BEGIN_SRC elisp 
;; (use-package centaur-tabs
;;   :straight t
;;   :defer 1
;;   :demand
;;   :config
;;   (centaur-tabs-mode t)
;;   (centaur-tabs-headline-match)
;; (setq centaur-tabs-style "bar")
;; ;; æ›´æ”¹æ ‡ç­¾é«˜åº¦
;; (setq centaur-tabs-height 32)

;; ;; æ ‡ç­¾å›¾æ ‡
;; (setq centaur-tabs-set-icons t)

;; ;; ä½¿å›¾æ ‡å˜æˆçº¯è‰²(ä¸æ ‡ç­¾æ–‡æœ¬çš„é¢œè‰²ç›¸åŒ)
;; (setq centaur-tabs-plain-icons t)

;; ;; ä½¿æœªé€‰å®šæ ‡ç­¾çš„å›¾æ ‡å˜æˆç°è‰²:
;; (setq centaur-tabs-gray-out-icons 'buffer)

;; ;; åœ¨å·¦ä¾§æ æ˜¾ç¤ºå½©è‰²æ ‡ç­¾
;; (setq centaur-tabs-set-bar 'left)

;; ;;ä¸Šé¢çš„çº¢çº¿
;; (setq centaur-tabs-set-bar 'over)
;; (setq centaur-tabs-close-button "x")

;; ;; ç¼–è¾‘çŠ¶æ€ä¸‹ä½¿ç”¨æ›´æ”¹ç¬¦å·
;; (setq centaur-tabs-set-modified-marker t)
;; (setq centaur-tabs-modified-marker "*")

;; ;; ä¸ºäº†å®šåˆ¶ç¼“å†²åŒºåˆ†ç»„çš„æ–¹å¼ï¼Œå¯ä»¥ä¿®æ”¹æ ‡ç­¾ç¼“å†²åŒºç»„åŠŸèƒ½ï¼Œå¦‚ä¸‹æ‰€ç¤º:
;;     (defun centaur-tabs-buffer-groups ()
;;       "`centaur-tabs-buffer-groups' control buffers' group rules.

;;     Group centaur-tabs with mode if buffer is derived from `eshell-mode' `emacs-lisp-mode' `dired-mode' `org-mode' `magit-mode'.
;;     All buffer name start with * will group to \"Emacs\".
;;     Other buffer group by `centaur-tabs-get-group-name' with project name."
;;       (list
;; 	(cond
;; 	 ((or (string-equal "*" (substring (buffer-name) 0 1))
;; 	      (memq major-mode '(magit-process-mode
;; 				 magit-status-mode
;; 				 magit-diff-mode
;; 				 magit-log-mode
;; 				 magit-file-mode
;; 				 magit-blob-mode
;; 				 magit-blame-mode
;; 				 )))
;; 	  "Emacs")
;; 	 ((derived-mode-p 'prog-mode)
;; 	  "Editing")
;; 	 ((derived-mode-p 'dired-mode)
;; 	  "Dired")
;; 	 ((memq major-mode '(helpful-mode
;; 			     help-mode))
;; 	  "Help")
;; 	 ((memq major-mode '(org-mode
;; 			     org-agenda-clockreport-mode
;; 			     org-src-mode
;; 			     org-agenda-mode
;; 			     org-beamer-mode
;; 			     org-indent-mode
;; 			     org-bullets-mode
;; 			     org-cdlatex-mode
;; 			     org-agenda-log-mode
;; 			     diary-mode))
;; 	  "OrgMode")
;; 	 (t
;; 	  (centaur-tabs-get-group-name (current-buffer))))))

;; ;; å¦‚æœä½ æƒ³è®©ä½ çš„é€‰é¡¹å¡æ˜¾ç¤ºç¼“å†²ç»„çš„åç§°ï¼Œè€Œä¸æ˜¯ç¼“å†²åç§°ï¼Œä½ å¯ä»¥åœ¨ä½ çš„é…ç½®ä¸­æ”¾å…¥ä»¥ä¸‹å†…å®¹
;; (setq centaur-tabs--buffer-show-groups nil)

;; ;; è¦å¯ç”¨è‡ªåŠ¨ç¼“å†²åŒºé‡æ–°æ’åºåŠŸèƒ½ï¼Œè¯·åœ¨é…ç½®ä¸­ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½:
;; (centaur-tabs-enable-buffer-reordering)
;; (setq centaur-tabs-adjust-buffer-order t)
;; (setq centaur-tabs-adjust-buffer-order 'left)

;; ;; ä½ å¯ä»¥æ ¹æ®æŠ›å°„ä½“çš„é¡¹ç›®å¯¹æ ‡ç­¾è¿›è¡Œåˆ†ç»„ã€‚åªéœ€åœ¨ä½ çš„é…ç½®ä¸­ä½¿ç”¨ä»¥ä¸‹åŠŸèƒ½:
;; (centaur-tabs-group-by-projectile-project)
;; (centaur-tabs-group-buffer-groups)
;;   :bind
;;   ("C-<prior>" . centaur-tabs-backward)
;;   ("C-<next>" . centaur-tabs-forward)
;; )

#+END_SRC

*** winum çª—å£å¯¼èˆª
#+BEGIN_SRC emacs-lisp
(use-package winum
  :straight nil
  :defer 2
  :load-path "~/.emacs.d/lisp"
  :config
  (winum-mode)
)
#+END_SRC 

*** awesome-tab æ ‡ç­¾æ 
#+BEGIN_SRC emacs-lisp
(use-package awesome-tab
  :straight nil
  :defer 2
  :load-path "~/.emacs.d/lisp"
  :config
  (awesome-tab-mode t)
;; è®¾ç½®æ ‡ç­¾æ é•¿åº¦
(setq awesome-tab-label-fixed-length 14)
;; é«˜åº¦
(setq awesome-tab-height 150)
;; æŒ‰ä½¿ç”¨ç´¢å¼•æ’è¡Œ
;; (setq awesome-tab-show-tab-index t)
;; å¦‚æœä½¿ç”¨ helm
(awesome-tab-build-helm-source)
;; éšè—é‚£äº›buffer
(defun awesome-tab-hide-tab (x)
  (let ((name (format "%s" x)))
    (or
     (string-prefix-p "*epc" name)
     (string-prefix-p "*helm" name)
     (string-prefix-p "*bm-bookmarks*" name)
     (string-prefix-p "*Compile-Log*" name)
     (string-prefix-p "*lsp" name)
     (and (string-prefix-p "magit" name)
               (not (file-name-extension name)))
     )))

;; buffer ç¾¤ç»„å½’ç±»
(defun awesome-tab-buffer-groups ()
  "`awesome-tab-buffer-groups' control buffers' group rules.

Group awesome-tab with mode if buffer is derived from `eshell-mode' `emacs-lisp-mode' `dired-mode' `org-mode' `magit-mode'.
All buffer name start with * will group to \"Emacs\".
Other buffer group by `awesome-tab-get-group-name' with project name."
  (list
   (cond
    ((or (string-equal "*" (substring (buffer-name) 0 1))
         (memq major-mode '(magit-process-mode
                            magit-status-mode
                            magit-diff-mode
                            magit-log-mode
                            magit-file-mode
                            magit-blob-mode
                            magit-blame-mode
                            )))
     "Emacs")
    ((derived-mode-p 'eshell-mode)
     "EShell")
    ((derived-mode-p 'emacs-lisp-mode)
     "Elisp")
    ((derived-mode-p 'dired-mode)
     "Dired")
    ((memq major-mode '(org-mode org-agenda-mode diary-mode))
     "OrgMode")
    (t
     (awesome-tab-get-group-name (current-buffer))))))
)

#+END_SRC

*** undo-fu æ’¤é”€åŠŸèƒ½
#+BEGIN_SRC elisp 
(use-package undo-fu
:defer 1
:straight nil
:load-path "~/.emacs.d/lisp"
:init
(setq evil-undo-system 'undo-fu)
)

#+END_SRC
*** avy å•è¯è·³è·ƒ
#+BEGIN_SRC elisp 
(use-package avy
:straight t
:defer 2
)
#+END_SRC

*** Markdown-mode
#+BEGIN_SRC elisp 
(defun my-config-markdown-mode ()
(interactive)
(org-babel-load-file
 (expand-file-name "my-config/my-config-markdown-mode.org"
                   user-emacs-directory))
(hydra-vim-autocmd-markdown-mode/body)
)
#+END_SRC

*** Ibuffer æŸ¥çœ‹
#+BEGIN_SRC elisp 
;; ;; buffer æŸ¥çœ‹
;; (use-package all-the-icons-ibuffer
;;   :defer 1
;;   :straight nil
;;   :load-path "~/.emacs.d/lisp"
;;   :config
;;   (all-the-icons-ibuffer-mode 1)
;; (when (string= "windows-nt" system-type)
;;   ;; Windows only configuration.
;;   ;; æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡.
;;   (setq all-the-icons-ibuffer-icon t)
;;   ;; æ˜¯å¦æ˜¾ç¤ºå½©è‰²å›¾æ ‡
;;   (setq all-the-icons-ibuffer-color-icon t)
;; )
;; (when (string= "darwin" system-type)
;;   ;; Windows only configuration.
;;   ;; æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡.
;;   (setq all-the-icons-ibuffer-icon t)
;;   ;; æ˜¯å¦æ˜¾ç¤ºå½©è‰²å›¾æ ‡
;;   (setq all-the-icons-ibuffer-color-icon t)
;; )
;; (when (string= "gnu/linux" system-type)
;;   ;; Windows only configuration.
;;   ;; æ˜¯å¦æ˜¾ç¤ºå›¾æ ‡.
;;   (setq all-the-icons-ibuffer-icon nil)
;;   ;; æ˜¯å¦æ˜¾ç¤ºå½©è‰²å›¾æ ‡
;;   ;; (setq all-the-icons-ibuffer-color-icon t)
;; )
;;   ;; ibufferä¸­é»˜è®¤çš„å›¾æ ‡å¤§å°
;;   (setq all-the-icons-ibuffer-icon-size 1.0)
;;   ;; ibufferä¸­å›¾æ ‡çš„é»˜è®¤å‚ç›´è°ƒæ•´
;;   (setq all-the-icons-ibuffer-icon-v-adjust 0.0)
;;   ;; åœ¨ibufferä¸­ä½¿ç”¨äººç±»å¯è¯»çš„æ–‡ä»¶å¤§å°
;;   (setq  all-the-icons-ibuffer-human-readable-size t)
;;   ;;å‘ˆç°ç¼“æ…¢
;;   ;;å¦‚æœä½ åœ¨åŒæ—¶å‘ˆç°å¤šä¸ªå›¾æ ‡æ—¶é‡åˆ°äº†æ€§èƒ½ä¸‹é™ï¼Œ
;;   ;;æ‚¨å¯ä»¥å°è¯•è®¾ç½®ä»¥ä¸‹å˜é‡
;;   (setq inhibit-compacting-font-caches t)
;;   )
#+END_SRC
*** Pyim ä¸­æ–‡è¾“å…¥æ³• è¿˜æ²¡æœ‰é…ç½®å¥½
#+BEGIN_SRC elisp 
(defun my-config-pyim()
(interactive)
(org-babel-load-file
 (expand-file-name "my-config/my-config-pyim.org"
                   user-emacs-directory))
(toggle-input-method)
)
#+END_SRC
*** ivy counsel ç±»ä¼¼ helm çš„åŒ…
#+BEGIN_SRC elisp 
;; ä¸º counsel-M-x æä¾›å†å²æœç´¢
(use-package smex
:straight t
:defer 1)

(use-package counsel
:defer 1
:straight t
:config
(ivy-mode)
(setq ivy-use-virtual-buffers t)
(setq enable-recursive-minibuffers t)
;; enable this if you want `swiper' to use it
;; (setq search-default-mode #'char-fold-to-regexp)
)
;; å»æ‰^å‰ç¼€
;; delete M-x ^
(with-eval-after-load 'counsel
  (setq ivy-initial-inputs-alist nil))
;; è°ƒæ•´ counsel æœç´¢çš„æ–¹å¼: å¿½ç•¥å•è¯é¡ºåº
(setq ivy-re-builders-alist
'((counsel-rg . ivy--regex-plus)
 (swiper . ivy--regex-plus)
 (swiper-isearch . ivy--regex-plus)
 (t . ivy--regex-ignore-order)))
#+END_SRC
*** popper ç®¡ç†å„ç§å¼¹çª—(æœªé…ç½®å¥½)
#+BEGIN_SRC elisp 
(use-package popper
  :defer 2
  :straight t ; or :straight t
  :bind (("C-`"   . popper-toggle-latest)
         ("M-`"   . popper-cycle)
         ("C-M-`" . popper-toggle-type))
  :init
  (setq popper-reference-buffers
        '("\\*Messages\\*"
          "Output\\*$"
          "\\*Async Shell Command\\*"
          help-mode
          compilation-mode))
  (popper-mode +1)
  (popper-echo-mode +1))                ; For echo area hints

#+END_SRC
*** bm æ–‡ä»¶ æ ‡è®° å¯¼èˆª
#+BEGIN_SRC elisp 
(use-package bm
:straight t
;; :defer 2
:init
;; åŠ è½½æ—¶æ¢å¤ï¼ˆç”šè‡³åœ¨æ‚¨éœ€è¦ bm ä¹‹å‰ï¼‰
(setq-default bm-buffer-persistence t)
:config
;; åœ¨å“ªé‡Œå­˜å‚¨æŒä¹…æ–‡ä»¶ 
(setq bm-repository-file "~/.emacs.d/bm-repository")
;; save bookmarks
(setq-default bm-buffer-persistence t)
;; å¯åŠ¨æ—¶ä»æ–‡ä»¶åŠ è½½å­˜å‚¨åº“
(add-hook 'after-init-hook 'bm-repository-load)
;; Saving Boomarks
(add-hook 'kill-buffer-hook #'bm-buffer-save)
;; é€€å‡ºæ—¶å°†å­˜å‚¨åº“ä¿å­˜åˆ°æ–‡ä»¶ã€‚
;; æ€æ­» Emacs æ—¶ä¸ä¼šè°ƒç”¨ kill-buffer-hookï¼Œæ‰€ä»¥æˆ‘ä»¬
;; å¿…é¡»å…ˆä¿å­˜æ‰€æœ‰ä¹¦ç­¾ã€‚
(add-hook 'kill-emacs-hook #'(lambda nil
    (bm-buffer-save-all)
    (bm-repository-save)))

;; ä¸éœ€è¦ä½¿ç”¨ `after-save-hook' æ¥å®ç°æŒä¹…æ€§ï¼Œ
;; ä½†å®ƒä½¿å­˜å‚¨åº“ä¸­çš„ä¹¦ç­¾æ•°æ®ä¸æ–‡ä»¶æ›´åŠ åŒæ­¥
;; çŠ¶æ€ã€‚
(add-hook 'after-save-hook #'bm-buffer-save)
;; æ¢å¤ä¹¦ç­¾ 
(add-hook 'find-file-hooks   #'bm-buffer-restore)
(add-hook 'after-revert-hook #'bm-buffer-restore)
(add-hook 'vc-before-checkin-hook #'bm-buffer-save)
)
#+END_SRC
*** buffer-move å°†bufferç§»åŠ¨åˆ°å…¶ä»–çª—å£
#+BEGIN_SRC elisp 
(use-package buffer-move
:straight nil
:load-path "~/.emacs.d/lisp"
:defer 3
)
#+END_SRC

*** zoom è‡ªåŠ¨è°ƒæ•´çª—å£å¤§å°
#+BEGIN_SRC elisp 
(use-package zoom
:straight t
:defer 3
:config
(custom-set-variables
 '(zoom-mode t))
(custom-set-variables
 '(zoom-size '(0.618 . 0.618)))
(defun size-callback ()
  (cond ((> (frame-pixel-width) 1280) '(90 . 0.75))
        (t                            '(0.5 . 0.5))))

(custom-set-variables
 '(zoom-size 'size-callback))

)
#+END_SRC
*** pangu-spacing è°ƒæ•´ä¸­è‹±æ–‡æ··ç‰ˆçš„æ–‡å­—,ä¸­è‹±æ–‡å†™åœ¨ä¸€èµ·æ—¶ä¸å¥½çœ‹
#+BEGIN_SRC elisp 
(use-package pangu-spacing
:defer 5
:straight nil
:load-path "~/.emacs.d/lisp"
)
#+END_SRC
*** yasnippet è¡¥å…¨
#+BEGIN_SRC elisp 
(use-package yasnippet
:defer 2
:straight nil
:load-path "~/.emacs.d/lisp"
:hook (prog-mode . yas-minor-mode)
:config
(yas-global-mode 1)
(yas-reload-all)
;; (add-hook 'prog-mode-hook #'yas-minor-mode)
(setq yas-snippet-dirs
      '("~/.emacs.d/snippets"                 ;; personal snippets
        ;; "/path/to/some/collection/"           ;; foo-mode and bar-mode snippet collection
        ;; "/path/to/yasnippet/yasmate/snippets" ;; the yasmate collection
        ))
)
#+END_SRC 
*** workgroups2 ä¿å­˜å½“å‰ç¼–è¾‘çš„ç¼“å­˜åŒºï¼Œä¸‹æ¬¡ç›´æ¥æ‰“å¼€ï¼Œå…‰æ ‡ä½ç½®ä¹Ÿä¼šä¿æŒ
#+BEGIN_SRC elisp 
;; ä¿å­˜å½“å‰ç¼–è¾‘çš„ç¼“å­˜åŒºï¼Œä¸‹æ¬¡ç›´æ¥æ‰“å¼€ï¼Œå…‰æ ‡ä½ç½®ä¹Ÿä¼šä¿æŒ
;; å‘½ä»¤ä½¿ç”¨ wg-****
(use-package workgroups2
:straight t
:defer 4
:config
(workgroups-mode 1)
(setq wg-session-file "~/.emacs.d/.emacs_workgroups")
;; ;; æ”¯æŒçš„buffer
;; (with-eval-after-load 'workgroups2
;;   ;; provide major mode, package to require, and functions
;;   (wg-support 'ivy-occur-grep-mode 'ivy
;;               `((serialize . ,(lambda (_buffer)
;;                                 (list (base64-encode-string (buffer-string) t))))
;;                 (deserialize . ,(lambda (buffer _vars)
;;                                   (switch-to-buffer (wg-buf-name buffer))
;;                                   (insert (base64-decode-string (nth 0 _vars)))
;;                                   ;; easier than `ivy-occur-grep-mode' to set up
;;                                   (grep-mode)
;;                                   ;; need return current buffer at the end of function
                                  ;; (current-buffer))))))
)


#+END_SRC
*** olivetti é¡µé¢å±…ä¸­
#+BEGIN_SRC elisp

(use-package olivetti
:defer 1
:straight nil
:load-path "~/.emacs.d/lisp")
(use-package writeroom-mode
:defer 1
:straight nil
:load-path "~/.emacs.d/lisp")

#+END_SRC

*** web-mode
#+BEGIN_SRC elisp
(use-package web-mode
:straight t
:config
(add-to-list 'auto-mode-alist '("\\.html?\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.js?\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.css?\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.php?\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.phtml\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.tpl\\.php\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.[agj]sp\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.as[cp]x\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.erb\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.mustache\\'" . web-mode))
(add-to-list 'auto-mode-alist '("\\.djhtml\\'" . web-mode))
)
 
#+END_SRC
*** linum-relative ç›¸å¯¹è¡Œå·
#+BEGIN_SRC elisp
(use-package linum-relative
:defer 3
:straight nil
:load-path "~/.emacs.d/lisp"
)
#+END_SRC
*** lsp-bridge
#+BEGIN_SRC elisp
;; (use-package corfu
;;   :defer 2
;;   ;; TAB-and-Go customizations
;;   :custom
;;   (corfu-cycle t)             ;; Enable cycling for `corfu-next/previous'
;;   (corfu-preselect-first nil) ;; Disable candidate preselection

;;   ;; Use TAB for cycling, default is `corfu-complete'.
;;   :bind
;;   (:map corfu-map
;;         ("TAB" . corfu-next)
;;         ([tab] . corfu-next)
;;         ("S-TAB" . corfu-previous)
;;           ([backtab] . corfu-previous))

;;      ;; :hook ((porg-mode . corfu-mode)
;;      ;;        ;; ()
;;      ;;        (org-mode . corfu-mode))

;;     :init
;;     (global-corfu-mode)
;;   :config
;;   (add-to-list 'load-path "~/.emacs.d/plugins/lsp-bridge")
;;   (require 'lsp-bridge)
;;   (require 'lsp-bridge-icon)        ;; show icons for completion items, optional
;;   (require 'lsp-bridge-jdtls)       ;; provide Java third-party library jump and -data directory support, optional
;;   (require 'corfu)
;;   (require 'corfu-info)
;;   (require 'corfu-history)
;;   (require 'lsp-bridge-orderless)   ;; make lsp-bridge support fuzzy match, optional
;;   (corfu-history-mode t)
;;   (global-lsp-bridge-mode)
;;   (when (> (frame-pixel-width) 3000) (custom-set-faces '(corfu-default ((t (:height 1.3))))))  ;; adjust default font height when running in HiDPI screen.


;;   )
#+END_SRC
*** lsp-mode
#+BEGIN_SRC elisp

(use-package lsp-mode
    :defer 3
    :straight t
    :hook (python-mode . lsp-deferred)
    :commands (lsp lsp-deferred))
(use-package lsp-pyright
  :defer 3
  :straight t
  :hook (python-mode . (lambda ()
                          (require 'lsp-pyright)
                          (lsp))))  ; or lsp-deferred

;; ä»£ç æŠ˜å 
(use-package origami
:straight t
:defer 6)


#+END_SRC
*** ä¿æŒç¼–è¾‘çŠ¶æ€
#+BEGIN_SRC elisp
;; (require 'init-benchmarking)
;; (require 'init-sessions)
#+END_SRC
*** Elfeed
#+BEGIN_SRC elisp
(defun elfeed-start-my ()
(interactive)
(use-package elfeed
:straight t
:hook (evil-insert-state . elfeed-search-mode)
:bind (:map elfeed-search-mode-map
            ("q" . elfeed-quit-my))
:init (setq url-queue-timeout 30
            elfeed-db-directory (locate-user-emacs-file ".elfeed")
	    ;; elfeed-show-entry-switch #'pop-to-buffer
	    ;; elfeed-show-entry-delete #'delete-window
      )
:config
(push elfeed-db-directory recentf-exclude))
(use-package elfeed-org
:straight t
:config
(elfeed-org)
(setq rmh-elfeed-org-files (list "~/.emacs.d/elfeed.org"))
)
(defun elfeed-my ()
  "Wrapper to load the elfeed db from disk before opening"
  (interactive)
  (elfeed-db-load)
  (elfeed)
  (elfeed-search-update--force))
(defun elfeed-quit-my ()
  "Wrapper to save the elfeed db to disk before burying buffer"
  (interactive)
  (elfeed-db-save)
  (quit-window))

(elfeed-my)
)
#+END_SRC
*** Gnus
#+BEGIN_SRC elisp
  (use-package init-gnus
  :defer 2
  :straight nil
  :load-path "~/.emacs.d/lisp"
  )
#+END_SRC
*** Mu4e
#+BEGIN_SRC elisp
(when (string= "gnu/linux" system-type)
  (add-to-list 'load-path "/data/data/com.termux/files/usr/share/emacs/site-lisp/mu4e")
  (require 'mu4e)
  (setq mu4e-maildir (expand-file-name "~/Maildir/Gmail"))
  ;; (setq mu4e-drafts-folder "/[Gmail].è‰ç¨¿")
  ;; (setq mu4e-sent-folder "/[Gmail].å·²å‘é‚®ä»¶")
  ;; (setq mu4e-trash-folder "/[Gmail].å·²åˆ é™¤é‚®ä»¶")
  (setq mu4e-drafts-folder "/[Gmail].Drafts")
  (setq mu4e-sent-folder "/[Gmail].Sent Mail")
  (setq mu4e-trash-folder "/[Gmail].Bin")

  ;; ;; (setq message-signature-file "~/.emacs.d/.signature") ; put your signature in this file
  ;; ;; get mail
  (setq mu4e-get-mail-command "mu index"
        mu4e-html2text-command "w3m -T text/html"
        mu4e-update-interval 120
        mu4e-headers-auto-update t
        mu4e-compose-signature-auto-include nil)

  ;; (setq mu4e-maildir-shortcuts
  ;;       '( ("/INBOX" . ?i)
  ;;          ("/[Gmail].å·²å‘é‚®ä»¶" . ?s)
  ;;          ("/[Gmail].å·²åˆ é™¤é‚®ä»¶" . ?t)
  ;;          ("/[Gmail].è‰ç¨¿" . ?d)))
(setq mu4e-maildir-shortcuts
        '( ("/INBOX" . ?i)
           ("/[Gmail].Sent Mail" . ?s)
           ("/[Gmail].Bin" . ?t)
           ("/[Gmail].Drafts" . ?d)
	   ("/[Gmail].Starred" . ?t)))


  ;; show images
  (setq mu4e-show-images t)

;; use imagemagick, if available
(when (fboundp 'imagemagick-register-types)
  (imagemagick-register-types))

;; general emacs mail settings; used when composing e-mail
;; the non-mu4e-* stuff is inherited from emacs/message-mode
(setq mu4e-reply-to-address "isouthrain@gmail.com"
      user-mail-address "isouthrain@gmail.com"
      user-full-name "ISouthRain")

;; don't save message to Sent Messages, IMAP takes care of this
(setq mu4e-sent-messages-behavior 'delete)
)
#+END_SRC
** Org-mode æ’ä»¶
*** org-superstar-mode
#+BEGIN_SRC emacs-lisp
;; (use-package org-superstar
;; :straight t
;; :defer 5
;; :config
;; (require 'org-superstar)
;; (add-hook 'org-mode-hook (lambda () (org-superstar-mode 1)))
;; ;;è¿™é€šå¸¸æ˜¯é»˜è®¤å€¼ï¼Œä½†è¯·è®°ä½å®ƒå¿…é¡»ä¸ºé›¶
;; (setq org-hide-leading-stars nil)
;; ;;è¿™æ¡çº¿æ˜¯å¿…è¦çš„
;; (setq org-superstar-leading-bullet ?\s)
;; ;;å¦‚æœä½ ä½¿ç”¨ Org Indent ä½ è¿˜éœ€è¦æ·»åŠ è¿™ä¸ªï¼Œå¦åˆ™ä»¥ä¸Šåœ¨å¯ç”¨ç¼©è¿›æ—¶æ— æ•ˆ
;; (setq org-indent-mode-turns-on-hiding-stars nil)
;; ;;æƒ³è¦æ ‡é¢˜å®Œå…¨æ¶ˆå¤±
;; ;; (setq org-superstar-remove-leading-stars t)
;; ;;æ‚¨å¯ä»¥ç”¨é€‚åˆå½“å‰TODOå…³é”®å­—çš„ä¸“ä¸šé¡¹ç›®ç¬¦å·æ›¿æ¢æ ‡å‡†æ ‡é¢˜é¡¹ç›®ç¬¦å·ï¼
;; ;; (setq org-superstar-special-todo-items t)
;; ;;å¿«é€Ÿæ™®é€šåˆ—è¡¨é¡¹
;; ;; (defun my-auto-lightweight-mode ()
;; ;;   "Start Org Superstar differently depending on the number of lists items."
;; ;;   (let ((list-items
;; ;;          (count-matches "^[ \t]*?\\([+-]\\|[ \t]\\*\\)"
;; ;;                         (point-min) (point-max))))
;; ;;     (unless (< list-items 100)
;; ;;       (org-superstar-toggle-lightweight-lists)))
;; ;;   (org-superstar))

;; ;; (add-hook 'org-mode-hook #'my-auto-lightweight-mode)
;; )

#+END_SRC

*** org-download
#+BEGIN_SRC emacs-lisp
(defun my-config-org-download()
(interactive)
(org-babel-load-file
 (expand-file-name "my-config/my-config-org-download.org"
                   user-emacs-directory))
;; (org-mode-restart)
(hydra-org-download/body)
)

#+END_SRC

*** org-roam
#+BEGIN_SRC emacs-lisp
(defun org-roam-windows-run ()
;; (interactive)
(setq org-roam-v2-ack t)
(use-package org-roam
  :defer 3
  :straight t
  :custom
 (org-roam-directory (file-truename "F:\\MyFile\\Org"))
  :config
  ;; (org-roam-db-autosync-mode)
  ;; If using org-roam-protocol
  (require 'org-roam-protocol)
  ;;æœç´¢
(setq org-roam-node-display-template "${title}")

;;è¡¥å…¨
(setq org-roam-completion-everywhere t)

;;ä¸€ä¸ªä¹Ÿå¯ä»¥è®¾ç½®org-roam-db-node-include-functionã€‚ä¾‹å¦‚ï¼ŒATTACHè¦ä» Org-roam æ•°æ®åº“ä¸­æ’é™¤æ‰€æœ‰å¸¦æœ‰æ ‡ç­¾çš„æ ‡é¢˜ï¼Œå¯ä»¥è®¾ç½®ï¼š
(setq org-roam-db-node-include-function 
      (lambda () 
        (not (member "ATTACH" (org-get-tags)))))

;; é»˜è®¤æƒ…å†µä¸‹ï¼ŒOrg-roam æ˜¯æ€¥åˆ‡çš„ç¼“å­˜ï¼šæ¯æ¬¡ä¿®æ”¹å’Œä¿å­˜ Org-roam æ–‡ä»¶æ—¶ï¼Œå®ƒéƒ½ä¼šæ›´æ–°ç›¸åº”æ–‡ä»¶çš„æ•°æ®åº“ã€‚è¿™ä½¿æ•°æ®åº“ä¿æŒæœ€æ–°ï¼Œåœ¨ä½¿ç”¨äº¤äº’å¼å‘½ä»¤æ—¶å¼•èµ·æœ€å°‘çš„æ„å¤–ã€‚ä½†æ˜¯ï¼Œæ ¹æ®æ‚¨çš„ Org æ–‡ä»¶çš„å¤§å°ï¼Œæ•°æ®åº“æ›´æ–°å¯èƒ½æ˜¯ä¸€ä¸ªç¼“æ…¢çš„æ“ä½œã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®org-roam-db-update-on-saveä¸ºæ¥ç¦ç”¨æ•°æ®åº“çš„è‡ªåŠ¨æ›´æ–°nil
(setq org-roam-db-update-on-save t)

;; åœ¨ç¼“å­˜æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒOrg-roam ä¼šç”Ÿæˆå¤§é‡å†…å­˜ä¸­çš„æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚ Org æ–‡ä»¶çš„ ASTï¼‰ï¼Œè¿™äº›æ•°æ®ç»“æ„åœ¨ä½¿ç”¨åä¼šè¢«ä¸¢å¼ƒã€‚è¿™äº›ç»“æ„ä¼šå®šæœŸè¿›è¡Œåƒåœ¾å›æ”¶ï¼ˆè¯·å‚é˜…(elisp)info:elisp#Garbage Collectionï¼‰ã€‚Org-roam æä¾›äº†org-roam-db-gc-thresholdåœ¨è¿™äº›å†…å­˜å¯†é›†å‹æ“ä½œæœŸé—´ä¸´æ—¶æ›´æ”¹è¦è§¦å‘ GC çš„é˜ˆå€¼çš„é€‰é¡¹ã€‚ä¸ºäº†å‡å°‘åƒåœ¾æ”¶é›†è¿›ç¨‹çš„æ•°é‡ï¼Œå¯ä»¥è®¾ç½® org-roam-db-gc-thresholdä¸€ä¸ªè¾ƒé«˜çš„å€¼ï¼ˆä¾‹å¦‚most-positive-fixnumï¼‰ï¼š
(setq org-roam-db-gc-threshold most-positive-fixnum)

(setq org-roam-capture-templates
      '(("b" "åšå®¢" plain
         "%?"
         :if-new (file+head "åšå®¢/${slug}.org"
                            "#+title: ${title}\n")
         :immediate-finish t
         :unnarrowed t)
        ("g" "GTD" plain "%?"
         :if-new
         (file+head "GTD/${title}.org" "#+title: ${title}\n")
         :immediate-finish t
         :unnarrowed t)
        ("a" "article" plain "%?"
         :if-new
         (file+head "articles/${title}.org" "#+title: ${title}\n#+filetags: :article:\n")
         :immediate-finish t
         :unnarrowed t)))

;; åˆ›å»ºå·¦è¾¹æ˜¾ç¤ºå­ç›®å½•åˆ†ç±»
(cl-defmethod org-roam-node-type ((node org-roam-node))
  "Return the TYPE of NODE."
  (condition-case nil
      (file-name-nondirectory
       (directory-file-name
        (file-name-directory
         (file-relative-name (org-roam-node-file node) org-roam-directory))))
    (error "")))

(setq org-roam-node-display-template
      (concat "${type:15} ${title:*} " (propertize "${tags:10}" 'face 'org-tag)))
(org-roam-db-autosync-mode)
(setq org-roam-database-connector 'sqlite)
))


(defun org-roam-linux-run ()
;; (interactive)
(setq org-roam-v2-ack t)
(use-package org-roam
  :defer 3
  :straight t
  :custom
  (org-roam-directory (file-truename "~/MyFile/Org"))
  :config
  ;; (org-roam-db-autosync-mode)
  ;; If using org-roam-protocol
  (require 'org-roam-protocol)
  ;;æœç´¢
(setq org-roam-node-display-template "${title}")

;;è¡¥å…¨
(setq org-roam-completion-everywhere t)

;;ä¸€ä¸ªä¹Ÿå¯ä»¥è®¾ç½®org-roam-db-node-include-functionã€‚ä¾‹å¦‚ï¼ŒATTACHè¦ä» Org-roam æ•°æ®åº“ä¸­æ’é™¤æ‰€æœ‰å¸¦æœ‰æ ‡ç­¾çš„æ ‡é¢˜ï¼Œå¯ä»¥è®¾ç½®ï¼š
(setq org-roam-db-node-include-function 
      (lambda () 
        (not (member "ATTACH" (org-get-tags)))))

;; é»˜è®¤æƒ…å†µä¸‹ï¼ŒOrg-roam æ˜¯æ€¥åˆ‡çš„ç¼“å­˜ï¼šæ¯æ¬¡ä¿®æ”¹å’Œä¿å­˜ Org-roam æ–‡ä»¶æ—¶ï¼Œå®ƒéƒ½ä¼šæ›´æ–°ç›¸åº”æ–‡ä»¶çš„æ•°æ®åº“ã€‚è¿™ä½¿æ•°æ®åº“ä¿æŒæœ€æ–°ï¼Œåœ¨ä½¿ç”¨äº¤äº’å¼å‘½ä»¤æ—¶å¼•èµ·æœ€å°‘çš„æ„å¤–ã€‚ä½†æ˜¯ï¼Œæ ¹æ®æ‚¨çš„ Org æ–‡ä»¶çš„å¤§å°ï¼Œæ•°æ®åº“æ›´æ–°å¯èƒ½æ˜¯ä¸€ä¸ªç¼“æ…¢çš„æ“ä½œã€‚æ‚¨å¯ä»¥é€šè¿‡è®¾ç½®org-roam-db-update-on-saveä¸ºæ¥ç¦ç”¨æ•°æ®åº“çš„è‡ªåŠ¨æ›´æ–°nil
(setq org-roam-db-update-on-save t)

;; åœ¨ç¼“å­˜æ„å»ºè¿‡ç¨‹ä¸­ï¼ŒOrg-roam ä¼šç”Ÿæˆå¤§é‡å†…å­˜ä¸­çš„æ•°æ®ç»“æ„ï¼ˆä¾‹å¦‚ Org æ–‡ä»¶çš„ ASTï¼‰ï¼Œè¿™äº›æ•°æ®ç»“æ„åœ¨ä½¿ç”¨åä¼šè¢«ä¸¢å¼ƒã€‚è¿™äº›ç»“æ„ä¼šå®šæœŸè¿›è¡Œåƒåœ¾å›æ”¶ï¼ˆè¯·å‚é˜…(elisp)info:elisp#Garbage Collectionï¼‰ã€‚Org-roam æä¾›äº†org-roam-db-gc-thresholdåœ¨è¿™äº›å†…å­˜å¯†é›†å‹æ“ä½œæœŸé—´ä¸´æ—¶æ›´æ”¹è¦è§¦å‘ GC çš„é˜ˆå€¼çš„é€‰é¡¹ã€‚ä¸ºäº†å‡å°‘åƒåœ¾æ”¶é›†è¿›ç¨‹çš„æ•°é‡ï¼Œå¯ä»¥è®¾ç½® org-roam-db-gc-thresholdä¸€ä¸ªè¾ƒé«˜çš„å€¼ï¼ˆä¾‹å¦‚most-positive-fixnumï¼‰ï¼š
(setq org-roam-db-gc-threshold most-positive-fixnum)
(setq org-roam-capture-templates
'(
("d" "default" plain "%?"
  :target (file+head "${title}.org"
                     "#+title: ${title}\n")
  :unnarrowed t)
  )
)
;; åˆ›å»ºå·¦è¾¹æ˜¾ç¤ºå­ç›®å½•åˆ†ç±»
(cl-defmethod org-roam-node-type ((node org-roam-node))
  "Return the TYPE of NODE."
  (condition-case nil
      (file-name-nondirectory
       (directory-file-name
        (file-name-directory
         (file-relative-name (org-roam-node-file node) org-roam-directory))))
    (error "")))

(setq org-roam-node-display-template
      (concat "${type:15} ${title:*} " (propertize "${tags:10}" 'face 'org-tag)))

(add-to-list 'load-path "~/.emacs.d/plugins/emacsql-sqlite3/")
(require 'emacsql-sqlite3)
(setq org-roam-database-connector 'sqlite3)
  )

)

#+END_SRC

*** org-roam-ui
#+BEGIN_SRC emacs-lisp
(defun org-roam-ui-run ()
;; (interactive)
(use-package websocket
:straight t)
(use-package simple-httpd
:straight t)
(use-package org-roam-ui
:straight t
:config
(setq org-roam-ui-sync-theme t
          org-roam-ui-follow t
          org-roam-ui-update-on-save t
          org-roam-ui-open-on-start t)

)
)

(defun org-roam-windows-start ()
(interactive)
(org-roam-windows-run)
(org-roam-ui-run)
)
(defun org-roam-linux-start ()
(interactive)
(org-roam-linux-run)
(org-roam-ui-run)
)

#+END_SRC

*** org-wiki çš„é“¾æ¥ ä¼šè¢« org-bras æ£ä¹±ï¼Œ åœ¨ TUI ç»ˆç«¯æ­£å¸¸
#+BEGIN_SRC emacs-lisp
(defun my-config-org-wiki()
(interactive)
(org-babel-load-file
 (expand-file-name "my-config/my-config-org-wiki.org"
                   user-emacs-directory))
;; (org-mode-restart)
(use-package org-download
:straight t
:config
;; (require 'org-download)
;; Drag-and-drop to `dired`
(add-hook 'dired-mode-hook 'org-donload-enable)
(setq org-download-heading-lvl nil)
;; æ–‡ä»¶ç›®å½•
;;(setq-default org-download-image-dir "Attachment")
(defun my-org-download--dir-1 ()
    (or org-download-image-dir (concat "./Attachment/" (file-name-nondirectory (file-name-sans-extension (buffer-file-name))) )))

  (advice-add #'org-download--dir-1 :override #'my-org-download--dir-1)
)
(use-package ox-hugo
  :straight t   ;Auto-install the package from Melpa
  ;; :pin melpa  ;`package-archives' should already have ("melpa" . "https://melpa.org/packages/")
  :after ox)
(hydra-org-wiki/body)
)
#+END_SRC

*** org-brain
#+BEGIN_SRC emacs-lisp
;; (use-package org-brain
;;   :defer 3
;;   :straight nil
;;   :load-path "~/.emacs.d/lisp"
;;   :init
;; (when (string= "windows-nt" system-type)
;;   (setq org-brain-path "F:\\MyFile\\Org"))
;; (when (string= "gnu/linux" system-type)
;;   (setq org-brain-path "~/MyFile/Org"))
;; (when (string= "darwin" system-type)
;;   (setq org-brain-path "~/Desktop/MyFile/Org"))
;;   ;; For Evil users
;;   (with-eval-after-load 'evil
;;     (evil-set-initial-state 'org-brain-visualize-mode 'emacs))
;;   :config
;;   (setq org-id-track-globally t)
;; (when (string= "windows-nt" system-type)
;;   (setq org-id-locations-file "F:\\MyFile\\Org\\.org-id-locations"))
;; (when (string= "gnu/linux" system-type)
;;   (setq org-id-locations-file "~/MyFile/Org/.org-id-locations"))
;; (when (string= "darwin" system-type)
;;   (setq org-id-locations-file "~/MyFile/Org/Desktop/.org-id-locations"))
;;   (add-hook 'before-save-hook #'org-brain-straight-ids-in-buffer)
;;   (setq org-brain-visualize-default-choices 'all)
;;   (setq org-brain-title-max-length 12)
;;   (setq org-brain-include-file-entries t
;;         org-brain-file-entries-use-title t
;; 	)
;; ;; é»˜è®¤æ–‡ä»¶
;;   ;; (setq my/default-org-brain-file "index")
;;   ;; (setq org-brain-default-file-parent my/default-org-brain-file)
;; )
;; ;; Allows you to edit entries directly from org-brain-visualize
;; (use-package polymode
;;   :straight t
;;   :defer 3
;;   :config
;;   (add-hook 'org-brain-visualize-mode-hook #'org-brain-polymode))
#+END_SRC

*** org-cliplink
    #+BEGIN_SRC emacs-lisp
(use-package org-cliplink
:straight t
:defer 2
:config
(defun custom-org-cliplink ()
  (interactive)
  (org-cliplink-insert-transformed-title
   (org-cliplink-clipboard-content)     ;take the URL from the CLIPBOARD
   (lambda (url title)
     (let* ((parsed-url (url-generic-parse-url url)) ;parse the url
            (clean-title
             (cond
              ;; if the host is github.com, cleanup the title
              ((string= (url-host parsed-url) "github.com")
               (replace-regexp-in-string "GitHub - .*: \\(.*\\)" "\\1" title))
              ;; otherwise keep the original title
              (t title))))
       ;; forward the title to the default org-cliplink transformer
       (org-cliplink-org-mode-link-transformer url clean-title)))))
)

    #+END_SRC

*** org-bars æ ‡é¢˜æ”¹è‰¯
#+BEGIN_SRC emacs-lisp

;; (use-package org-bars
;; :load-path "~/.emacs.d/lisp"
;; :hook (org-mode . org-bars-mode)
;; :config
;; ;; æ˜¾ç¤ºæ ‡é¢˜å·
;; (setq org-startup-numerated nil)
;; ;; æ”¹è‰¯æ ‡é¢˜ç¼©è¿›é—®é¢˜
;; (setq org-indent-indentation-per-level nil)
;; )
;; ;; è®¾ç½®orgæ ‡é¢˜1-8çº§çš„å­—ä½“å¤§å°å’Œé¢œè‰²ï¼Œé¢œè‰²æ‘˜æŠ„è‡ªmonokai-modeæ ‡é¢˜çš„å­—ä½“å¤§å°å’Œæ­£æ–‡ä¸€è‡´ï¼Œè®¾æˆ1.0ï¼Œ å¦‚æœå¸Œæœ›æ ‡é¢˜å­—ä½“å¤§ä¸€ç‚¹å¯ä»¥è®¾æˆ1.2ã€‚;å¸Œæœ›org
;; ;; è®¾ç½®æ ‡é¢˜å­—ä½“å¤§å°
;; (custom-set-faces

;;   '(org-level-1 ((t (:inherit outline-1 :height 1.1)))) 
;;   '(org-level-2 ((t (:inherit outline-2 :height 1.1)))) 
;;   '(org-level-3 ((t (:inherit outline-3 :height 1.1)))) 
;;   '(org-level-4 ((t (:inherit outline-4 :height 1.1)))) 
;;   '(org-level-5 ((t (:inherit outline-5 :height 1.1)))) 
;;   '(org-level-6 ((t (:inherit outline-6 :height 1.1)))) 
;;   '(org-level-7 ((t (:inherit outline-7 :height 1.1)))) 
;;   '(org-level-8 ((t (:inherit outline-8 :height 1.1)))) 
;;   '(org-level-9 ((t (:inherit outline-9 :height 1.1))))
;;   '(org-level-10 ((t (:inherit outline-10 :height 1.1))))
;;   '(org-level-11 ((t (:inherit outline-11 :height 1.1))))
;;   '(org-level-12 ((t (:inherit outline-12 :height 1.1))))
;;   '(org-level-13 ((t (:inherit outline-13 :height 1.1))))
;;   '(org-level-14 ((t (:inherit outline-14 :height 1.1))))
;;   '(org-level-15 ((t (:inherit outline-15 :height 1.1))))

;;  ) ;; end custom-set-faces
#+END_SRC
*** Org-appear è‡ªåŠ¨å±•å¼€é“¾æ¥æ˜¾ç¤º
#+BEGIN_SRC emacs-lisp
(use-package org-appear
:straight nil
:defer 2
:load-path "~/.emacs.d/lisp"
:hook (org-mode . org-appear-mode)
:config
;; é“¾æ¥è‡ªåŠ¨å±•å¼€, ä»¥åŠå…‰æ ‡åœç•™å¤šå°‘ç§’æ‰å±•å¼€
(setq org-appear-autolinks t)
(setq org-appear-delay 1)

(setq org-appear-autosubmarkers t)
(setq org-appear-autoentities t)
)
#+END_SRC

*** org-modern ç¾åŒ–org-mode æ‰€æœ‰çš„è¯­æ³•
#+BEGIN_SRC elisp 
;; (use-package org-modern
;; :straight nil
;; :load-path "~/.emacs.d/lisp"
;; :config
;; (add-hook 'org-mode-hook #'org-modern-mode)
;; (add-hook 'org-agenda-finalize-hook #'org-modern-agenda)
;; )
#+END_SRC
*** cnfonts ä¸­è‹±æ–‡å¯¹é½
#+BEGIN_SRC elisp 
;; Org-mode ä¸­è‹±æ–‡å­—ä½“å¯¹é½
(use-package cnfonts
:straight t
:defer 2
:config
(setq cnfonts-profiles
    '("program" "org-mode" "read-book"))

;; æœ‰äº›ç”¨æˆ·å¸Œæœ›å°† profile é…ç½®æ–‡ä»¶åšä¸ºè‡ªå·±çš„ Emacs é…ç½®ï¼Œåœ¨ä¸åŒçš„è®¡ç®—æœºä¸ŠåŒæ­¥å’Œç®¡ç†ï¼Œæˆ‘å»ºè®®è¿™äº›ç”¨æˆ·å°†`cnfonts-use-system-type'è®¾ç½®ä¸º t, è¿™æ ·ï¼Œç›¸åŒåç§°çš„ profile åœ¨ä¸åŒçš„æ“ä½œç³»ç»Ÿä¸‹ï¼Œä¿å­˜çš„ä½ç½®ä¹Ÿä¸åŒï¼Œå¯ä»¥é¿å… profile å†²çªã€‚
;; (setq cnfonts-use-system-type t)

;; è®© cnfonts åœ¨ Emacs å¯åŠ¨æ—¶è‡ªåŠ¨ç”Ÿæ•ˆã€‚
;; (cnfonts-mode 1)

;; è®¸å¤šç”¨æˆ·ä½¿ç”¨ org-mode æ—¶ï¼Œä¹ æƒ¯è®©ä¸åŒçš„æ ‡é¢˜ï¼Œä½¿ç”¨çš„å­—ä½“å¤§å°ä¹Ÿä¸åŒï¼Œè¿™ä¸ªç‰¹æ€§éœ€è¦ç”¨æˆ·è®¾ç½®ï¼š
;; (setq cnfonts-use-face-font-rescale t)
(when (string= "windows-nt" system-type)
(defun cnfonts-set-font-and-mode-myself ()
  (interactive)
  (cnfonts-mode)
  (cnfonts-set-font)
)
(cnfonts-set-font-and-mode-myself)
)
)

#+END_SRC
*** org-html-themify æ ¹æ®å½“å‰ä¸»é¢˜å¯¼å‡ºä¸º html
#+BEGIN_SRC elisp 
;; (use-package org-html-themify
  ;; :straight
  ;; (org-html-themify
  ;;  :type git
  ;;  :host github
  ;;  :repo "DogLooksGood/org-html-themify"
  ;;  :files ("*.el" "*.js" "*.css"))
  ;; :hook (org-mode . org-html-themify-mode)
  ;; :custom
  ;; (org-html-themify-themes
  ;;  '((dark . monokai)
;;      (light . zenburn))))


#+END_SRC
** org-mode è®¾ç½®
#+BEGIN_SRC emacs-lisp
;;Windowsç³»ç»Ÿæ—¥å†ä¹±ç 
(setq system-time-locale "C")
(format-time-string "%Y-%m-%d %a")
;;è‡ªåŠ¨æ¢è¡Œ
(add-hook 'org-mode-hook 'toggle-truncate-lines)
;;é»˜è®¤ç¬”è®°è·¯å¾„
(when (string= "gnu/linux" system-type)
(setq org-default-notes-file "~/MyFile/Org/Note.org")
)
(when (string= "darwin" system-type)
(setq org-default-notes-file "~/Desktop/MyFile/Org/Note.org")
)
(when (string= "windows-nt" system-type)
(setq org-default-notes-file "F:\\MyFile\\Org\\Note.org")
)
;;è®¾ç½®æ‰“å¼€æŸç±»æ–‡ä»¶ä¸ºorgæ¨¡å¼
;;(add-to-list 'auto-mode-alist '("\\.txt\\" . org-mode))

;; å½“å®ƒä»¬å¤„äºæŸç§DONEçŠ¶æ€æ—¶ï¼Œä¸è¦åœ¨è®®ç¨‹ä¸­æ˜¾ç¤ºè®¡åˆ’çš„é¡¹ç›®ã€‚
(setq org-agenda-skip-scheduled-if-done t)
;; è®°å½•ä»»åŠ¡çŠ¶æ€å˜åŒ–,å¯èƒ½ä¼šè®°å½•å¯¹ä»»åŠ¡çŠ¶æ€çš„æ›´æ”¹ï¼Œå°¤å…¶æ˜¯å¯¹äºé‡å¤ä¾‹ç¨‹ã€‚å¦‚æœæ˜¯è¿™æ ·ï¼Œè¯·å°†å®ƒä»¬è®°å½•åœ¨æŠ½å±‰ä¸­ï¼Œè€Œä¸æ˜¯ç¬”è®°çš„å†…å®¹ã€‚
(setq org-log-state-notes-into-drawer t )
;; æ‰“å¼€ org æ–‡ä»¶ é»˜è®¤å°† åˆ—è¡¨æŠ˜å 
(setq org-cycle-include-plain-lists 'integrate)
;; éšè—è¯­æ³•ç¬¦å· ä¾‹å¦‚: *ç²—ä½“* , * ç¬¦å·ä¼šè¢«éšè—
(setq-default org-hide-emphasis-markers t)
   #+END_SRC
*** ä»£ç å—è®¾ç½®
#+BEGIN_SRC emacs-lisp
;;ä»£ç å—é«˜äº®
(setq org-src-fontify-natively t)
;;ä¸è‡ªåŠ¨tab
(setq org-src-tab-acts-natively nil)
;;è¯­è¨€éœ€è¦
(org-babel-do-load-languages
 'org-babel-load-languages
 '((python . t)))
#+END_SRC

*** å­—ä½“æ ·å¼é¢œè‰²è®¾ç½®
#+BEGIN_SRC elisp 
(defface my-org-emphasis-bold
  '((default :inherit bold)
    (((class color) (min-colors 88) (background light))
     :foreground "#a60000")
    (((class color) (min-colors 88) (background dark))
     :foreground "#ff8059"))
  "My bold emphasis for Org.")

(defface my-org-emphasis-italic
  '((default :inherit italic)
    (((class color) (min-colors 88) (background light))
     :foreground "#005e00")
    (((class color) (min-colors 88) (background dark))
     :foreground "#44BCAB"))
  "My italic emphasis for Org.")

(defface my-org-emphasis-underline
  '((default :inherit underline)
    (((class color) (min-colors 88) (background light))
     :foreground "#813e00")
    (((class color) (min-colors 88) (background dark))
     :foreground "#d0bc00"))
  "My underline emphasis for Org.")

(defface my-org-emphasis-strike-through
  '((((class color) (min-colors 88) (background light))
     :strike-through "#972500" :foreground "#505050")
    (((class color) (min-colors 88) (background dark))
     :strike-through "#ef8b50" :foreground "#a8a8a8"))
  "My strike-through emphasis for Org.")

(setq org-emphasis-alist
      '(("*" my-org-emphasis-bold)
        ("/" my-org-emphasis-italic)
        ("_" my-org-emphasis-underline)
        ("=" org-verbatim verbatim)
        ("~" org-code verbatim)
        ("+" (my-org-emphasis-strike-through :strike-through t))))
#+END_SRC
*** æ—¥ç¨‹æ–‡ä»¶ä½ç½®
#+BEGIN_SRC emacs-lisp
(when (string= "gnu/linux" system-type)
(setq org-agenda-files (list
       		             "~/MyFile/Org/GTD"
			     ))
)
(when (string= "darwin" system-type)
(setq org-agenda-files (list
       		             "~/Desktop/MyFile/Org/GTD"
			     ))
)
(when (string= "windows-nt" system-type)
(setq org-agenda-files (list
       		             "F:\\MyFile\\Org\\GTD"
			     ))
)
#+END_SRC

*** è®¾ç½® TODO é¢œè‰²åŠçŠ¶æ€
#+BEGIN_SRC emacs-lisp
;; ;;TODOé€‰é¡¹
;; (setq org-todo-keywords
;;       '((sequence "TODO(t!)"  "DOING(d!)" "|" "DONE(D!)")))

;; ;; è®¾ç½®ä»»åŠ¡æ ·å¼
;; (setq org-todo-keyword-faces
;;    '(("TODO" .   (:foreground "red" :weight bold))
;;     ("DOING" .      (:foreground "orange" :weight bold))
;;     ("DONE" .      (:foreground "green" :weight bold))
;;     ))

;; è®¾ç½®ä»»åŠ¡æµç¨‹(è¿™æ˜¯æˆ‘çš„é…ç½®)
(setq org-todo-keywords
      '((sequence "æœªå¼€å§‹(p!)" "è¿›è¡Œä¸­(t!)" "é˜»å¡ä¸­(s!)" "|" "å·²å®Œæˆ(d!)" "å·²å–æ¶ˆ(x!)")))

;; è®¾ç½®ä»»åŠ¡æ ·å¼
(setq org-todo-keyword-faces
   '(("æœªå¼€å§‹" .   (:foreground "red" :weight bold))
    ("é˜»å¡ä¸­" .   (:foreground "red" :weight bold))
    ("è¿›è¡Œä¸­" .      (:foreground "orange" :weight bold))
    ("å·²å®Œæˆ" .      (:foreground "green" :weight bold))
    ("å·²å–æ¶ˆ" .     (:background "gray" :foreground "#72DBB8"))
))
#+END_SRC

*** org-capture æ¨¡æ¿
#+BEGIN_SRC emacs-lisp
;;captureæ¨¡æ¿
;; (server-start)
(require 'org-protocol)

(use-package s
:straight t)
(add-to-list 'load-path "~/.emacs.d/plugins/org-protocol-capture-html/")
(require 'org-protocol-capture-html)
;; (setq org-protocol-default-template-key "w")
(when (string= "gnu/linux" system-type)
(setq org-capture-templates
      '(
	;;TODO
	("t" "Todo" entry (file+headline "~/MyFile/Org/GTD/Todo.org" "2022å¹´5æœˆ")
         "* æœªå¼€å§‹ %^{æƒ³åšä»€ä¹ˆï¼Ÿ}\n  :æ—¶é—´: %^T\n  %?\n  %i\n")
	 
	;;æ—¥å¿—
        ("j" "Journal" entry (file+datetree "~/MyFile/Org/Journal.org")
         "* %^{è®°äº›ä»€ä¹ˆ} %?\n  %i\n")
	 
	 ;;æ—¥ç¨‹å®‰æ’
	("a" "æ—¥ç¨‹å®‰æ’" entry (file+headline "~/MyFile/Org/GTD/Agenda.org" "2022å¹´5æœˆ")
	 "* %^{å®‰æ’} \n SCHEDULED: %^T \n  :åœ°ç‚¹: %^{åœ°ç‚¹}\n")
	 
	 ;;ç¬”è®°
        ;; ("n" "ç¬”è®°" entry (file+headline "~/MyFile/Org/Note.org" "2022å¹´4æœˆ")
        ("n" "ç¬”è®°" plain (file "~/MyFile/Org/Note.org")
	 "** %^{ä¸»æ ‡é¢˜}\n  :å†…å®¹: %^{å†…å®¹} \n  :æ—¶é—´: %T%?")
	 
	 ;;æ¶ˆè´¹
	("zd" "è´¦å•" plain (file+function "~/MyFile/Org/æ¶ˆè´¹.org" find-month-tree)
         " | %<%Y-%m-%d %a %H:%M:%S> | %^{prompt|Breakfast|Lunch|Dinner|æ°´æœ|å®µå¤œ|è´­ç‰©|äº¤é€šå‡ºè¡Œ|å…¶å®ƒ} | %^{é‡‘é¢} |" :kill-buffer t :immediate-finish t)
	 
	 ;;è‹±è¯­å•è¯
        ("e" "è‹±è¯­å•è¯" entry (file+datetree "~/MyFile/Org/å•è¯.org")
         "*  %^{è‹±è¯­å•è¯} ----> %^{ä¸­æ–‡ç¿»è¯‘}\n")

	 ;;Org-protocolç½‘é¡µæ”¶é›†
	 ("w" "ç½‘é¡µæ”¶é›†" entry (file "~/MyFile/Org/ç½‘é¡µæ”¶é›†.org")
	 "* [[%:link][%:description]] \n %U \n %:initial \n")
	("b" "Bookmarks" plain (file+headline "~/MyFile/Org/Bookmarks.org" "æ–°åŠ ä¹¦ç­¾")
	 "+ %?" :kill-buffer t)
	))
)

(when (string= "darwin" system-type)
(setq org-capture-templates
      '(
	;;TODO
	("t" "Todi" entry (file+headline "~/Desktop/MyFile/Org/GTD/Todo.org" "2022å¹´5æœˆ")
         "* æœªå¼€å§‹ %^{æƒ³åšä»€ä¹ˆï¼Ÿ}\n  :æ—¶é—´: %^T\n  %?\n  %i\n")
	 
	;;æ—¥å¿—
        ("j" "Journal" entry (file+datetree "~/Desktop/MyFile/Org/Journal.org")
         "* %^{è®°äº›ä»€ä¹ˆ} %?\n  %i\n")
	 
	 ;;æ—¥ç¨‹å®‰æ’
	("a" "æ—¥ç¨‹å®‰æ’" entry (file+headline "~/Desktop/MyFile/Org/GTD/Agenda.org" "2022å¹´5æœˆ")
	 "* %^{å®‰æ’} \n SCHEDULED: %^T \n  :åœ°ç‚¹: %^{åœ°ç‚¹}\n")
	 
	 ;;ç¬”è®°
        ("n" "ç¬”è®°" entry (file+headline "~/Desktop/MyFile/Org/Note.org" "2022å¹´4æœˆ")
	 "* %^{ä½ æƒ³è¦è®°å½•çš„ç¬”è®°} \n :æ—¶é—´: %T \n %?")
	 
	 ;;æ¶ˆè´¹
	("zd" "è´¦å•" plain (file+function "~/Desktop/MyFile/Org/æ¶ˆè´¹.org" find-month-tree)
         " | %<%Y-%m-%d %a %H:%M:%S> | %^{prompt|Breakfast|Lunch|Dinner|æ°´æœ|å®µå¤œ|è´­ç‰©|äº¤é€šå‡ºè¡Œ|å…¶å®ƒ} | %^{é‡‘é¢} |" :kill-buffer t :immediate-finish t)
	 
	 ;;è‹±è¯­å•è¯
        ("e" "è‹±è¯­å•è¯" entry (file+datetree "~/Desktop/MyFile/Org/å•è¯.org")
         "*  %^{è‹±è¯­å•è¯} ----> %^{ä¸­æ–‡ç¿»è¯‘}\n")

	 ;;Org-protocolç½‘é¡µæ”¶é›†
	 ("w" "ç½‘é¡µæ”¶é›†" entry (file "~/Desktop/MyFile/Org/ç½‘é¡µæ”¶é›†.org")
	 "* [[%:link][%:description]] \n %U \n %:initial \n")
	("b" "Bookmarks" plain (file+headline "~/Desktop/MyFile/Org/Bookmarks.org" "æ–°åŠ ä¹¦ç­¾")
	 "+ %?" :kill-buffer t :immediate-finish t)
	))
)

;;Windows
(when (string= "windows-nt" system-type)
(setq org-capture-templates
      '(
	;;TODO
	("t" "Todo" entry (file+headline "F:\\MyFile\\Org\\GTD\\Todo.org" "2022å¹´5æœˆ")
         "* TODO %^{æƒ³åšä»€ä¹ˆï¼Ÿ}\n  :æ—¶é—´: %^T\n  %?\n  %i\n")
	 
	;;æ—¥å¿—
        ("j" "Journal" entry (file+datetree "F:\\MyFile\\Org\\Journal.org")
         "* %^{è®°äº›ä»€ä¹ˆ} %?\n  %i\n")
	 
	 ;;æ—¥ç¨‹å®‰æ’
	("a" "æ—¥ç¨‹å®‰æ’" entry (file+headline "F:\\MyFile\\Org\\GTD\\Agenda.org" "2022å¹´5æœˆ")
	 "* %^{å®‰æ’} \n SCHEDULED: %^T \n  :åœ°ç‚¹: %^{åœ°ç‚¹}\n")
	 
	 ;;ç¬”è®°
        ("n" "ç¬”è®°" entry (file+headline "F:\\MyFile\\Org\\Note.org" "2022å¹´5æœˆ")
	 "* %^{ä½ æƒ³è¦è®°å½•çš„ç¬”è®°} \n :æ—¶é—´: %T \n %?")

	("y" "è¯­å½•" entry (file+headline "F:\\Hugo\\content\\Quotation.zh-cn.md" "2022")
	 "> %^{è¯­å½•}  ")

	 ;;æ¶ˆè´¹
	("zd" "è´¦å•" plain (file+function "F:\\MyFile\\Org\\æ¶ˆè´¹.org" find-month-tree)
         " | %<%Y-%m-%d %a %H:%M:%S> | %^{prompt|Breakfast|Lunch|Dinner|æ°´æœ|å®µå¤œ|è´­ç‰©|äº¤é€šå‡ºè¡Œ|å…¶å®ƒ} | %^{é‡‘é¢} |" :kill-buffer t :immediate-finish t)
	 
	 ;;è‹±è¯­å•è¯
        ("e" "è‹±è¯­å•è¯" entry (file+datetree "F:\\MyFile\\Org\\å•è¯.org")
         "*  %^{è‹±è¯­å•è¯} ----> %^{ä¸­æ–‡ç¿»è¯‘}\n")

	 ;;Org-protocolç½‘é¡µæ”¶é›†
	 ("w" "ç½‘é¡µæ”¶é›†" entry (file "F:\\MyFile\\Org\\ç½‘é¡µæ”¶é›†.org")
	 "* [[%:link][%:description]] \n %U \n %:initial \n")

	("b" "Bookmarks" plain (file+headline "F:\\MyFile\\Org\\Bookmarks.org" "æ–°åŠ ä¹¦ç­¾")
	 "+ %?" :kill-buffer t)
	))
)

;; (org-capture nil "zd")
(defun org-capture-Bookmarks ()
(interactive) ; å¦‚æœä¸éœ€è¦å®šä¹‰æˆå‘½ä»¤ï¼Œè¿™å¥å¯ä»¥ä¸è¦ã€‚
;; (org-capture nil "b")
;; (org-cliplink)
;; (org-capture-finalize)
;; (org-capture nil "b")
(org-capture)
(when (string= "windows-nt" system-type)
(find-file "F:\\MyFile\\Org\\Bookmarks.org"))
(when (string= "gnu/linux" system-type)
(find-file "~/MyFile/Org/Bookmarks.org"))
(when (string= "darwin" system-type)
(find-file "~/Desktop/MyFile/Org/Bookmarks.org"))
(org-html-export-to-html)
(kill-buffer (buffer-name))
)
;;åˆ›å»ºorg-capture æŒ‰é”®å¤¹,å¿…é¡»åˆ›å»ºæ‰èƒ½ç”¨å¤šæŒ‰é”®
(add-to-list 'org-capture-templates '("z" "è´¦å•"));;ä¸ä¸Šé¢çš„è´¦å•ç›¸å¯¹åº”
;; (add-to-list 'org-capture-templates '("w" "ç½‘é¡µæ”¶é›†"));;


;;ç”¨ org-capture è®°å½•è´¦å•
(defun get-year-and-month ()
  (list (format-time-string "%Yå¹´") (format-time-string "%mæœˆ")))


(defun find-month-tree ()
  (let* ((path (get-year-and-month))
         (level 1)
         end)
    (unless (derived-mode-p 'org-mode)
      (error "Target buffer \"%s\" should be in Org mode" (current-buffer)))
    (goto-char (point-min))             ;ç§»åŠ¨åˆ° buffer çš„å¼€å§‹ä½ç½®
    ;; å…ˆå®šä½è¡¨ç¤ºå¹´ä»½çš„ headlineï¼Œå†å®šä½è¡¨ç¤ºæœˆä»½çš„ headline
    (dolist (heading path)
      (let ((re (format org-complex-heading-regexp-format
                        (regexp-quote heading)))
            (cnt 0))
        (if (re-search-forward re end t)
            (goto-char (point-at-bol))  ;å¦‚æœæ‰¾åˆ°äº† headline å°±ç§»åŠ¨åˆ°å¯¹åº”çš„ä½ç½®
          (progn                        ;å¦åˆ™å°±æ–°å»ºä¸€ä¸ª headline
            (or (bolp) (insert "\n"))
            (if (/= (point) (point-min)) (org-end-of-subtree t t))
            (insert (make-string level ?*) " " heading "\n"))))
      (setq level (1+ level))
      (setq end (save-excursion (org-end-of-subtree t t))))
    (org-end-of-subtree)))

    #+END_SRC

*** é€šçŸ¥
#+BEGIN_SRC emacs-lisp
;; ;; è®©Emacsé€šçŸ¥
;; (require 'appt)
;; ;; æ¯å°æ—¶åŒæ­¥ä¸€æ¬¡appt,å¹¶ä¸”ç°åœ¨å°±å¼€å§‹åŒæ­¥
;; (run-at-time nil 3600 'org-agenda-to-appt)
;; ;; æ›´æ–°agendaæ—¶ï¼ŒåŒæ­¥appt
;; (add-hook 'org-finalize-agenda-hook 'org-agenda-to-appt)
;; ;; æ¿€æ´»æé†’
;; (appt-activate 1)
;; ;; æå‰åŠå°æ—¶æé†’
;; (setq appt-message-warning-time 1)
;; (setq appt-audible t)
;; ;;æé†’é—´éš”
;; (setq appt-display-interval 30)
;; (require 'notifications)
;; (defun appt-disp-window-and-notification (min-to-appt current-time appt-msg)
;;   (let ((title (format "%såˆ†é’Ÿå†…æœ‰æ–°çš„ä»»åŠ¡" min-to-appt)))
;;     (notifications-notify :timeout (* appt-display-interval 60000) ;ä¸€ç›´æŒç»­åˆ°ä¸‹ä¸€æ¬¡æé†’
;;                           :title title
;;                           :body appt-msg
;;                           )
;;     (appt-disp-window min-to-appt current-time appt-msg))) ;åŒæ—¶ä¹Ÿè°ƒç”¨åŸæœ‰çš„æé†’å‡½æ•°
;; (setq appt-display-format 'window) ;; åªæœ‰è¿™æ ·æ‰èƒ½ä½¿ç”¨è‡ªå®šä¹‰çš„é€šçŸ¥å‡½æ•°
;; (setq appt-disp-window-function #'appt-disp-window-and-notification)

#+END_SRC

*** å›¾ç‰‡è®¾ç½®
#+BEGIN_SRC emacs-lisp
;;æ‰“å¼€Orgæ–‡ä»¶è‡ªåŠ¨æ˜¾ç¤ºå›¾ç‰‡
(setq org-startup-with-inline-images t)
;;å›¾ç‰‡æ˜¾ç¤º1/3å°ºå¯¸
(setq org-image-actual-width (/ (display-pixel-width) 3))
;;å›¾ç‰‡æ˜¾ç¤º 300 é«˜åº¦ï¼Œå¦‚æœå›¾ç‰‡å°äº 300ï¼Œä¼šè¢«æ‹‰ä¼¸ã€‚
(setq org-image-actual-width '(500))
    #+END_SRC
*** å¯¼å‡º Html é«˜äº®ä»£ç 
#+BEGIN_SRC emacs-lisp
(use-package htmlize
:straight t
:defer 2)
#+END_SRC

** è‡ªå®šä¹‰å‡½æ•°
#+BEGIN_SRC elisp 
(defun lxr (names)
  (interactive "sæŸ¥æ‰¾è”ç³»äººï¼Œè¯·è¾“å…¥æ¡ä»¶ï¼š")
  (call-process-shell-command "lxr" nil t t "-s" names)
  )
(defun RunPython ()
  (interactive) ; å¦‚æœä¸éœ€è¦å®šä¹‰æˆå‘½ä»¤ï¼Œè¿™å¥å¯ä»¥ä¸è¦ã€‚
  (shell-command (format "python %s.py" (file-name-base (buffer-file-name))))
)
;; è‡ªå·±çš„é…ç½®æ–‡ä»¶
(defun myconfig ()
  (interactive) ; å¦‚æœä¸éœ€è¦å®šä¹‰æˆå‘½ä»¤ï¼Œè¿™å¥å¯ä»¥ä¸è¦ã€‚
(when (string= "windows-nt" system-type)
  (find-file "C:\\Users\\Jack\\AppData\\Roaming\\.emacs.d\\settings.org"))
(when (string= "gnu/linux" system-type)
  (find-file "~/.emacs.d/settings.org"))
  (when (string= "darwin" system-type)
  (find-file "~/.emacs.d/settings.org"))
(goto-line 56)
(org-cycle)
)

;; org-roam-db-sync
(defun org-roam-db-sync-myself ()
  (interactive) ; å¦‚æœä¸éœ€è¦å®šä¹‰æˆå‘½ä»¤ï¼Œè¿™å¥å¯ä»¥ä¸è¦ã€‚
(when (string= "gnu/linux" system-type)
  (shell-command "rm ~/.emacs.d/org-roam.db")
)
(when (string= "darwin" system-type)
  (shell-command "rm ~/.emacs.d/org-roam.db")
)
(when (string= "windows-nt" system-type)
  (shell-command "del C:\\Users\\Jack\\AppData\\Roaming\\.emacs.d\\org-roam.db")
)
  (org-roam-db-sync)
(evil-goto-line)
(org-global-cycle)
)

;; Markdown-mode å¼€å§‹
(defun markdown-mode-start-myself ()
  (interactive) ; å¦‚æœä¸éœ€è¦å®šä¹‰æˆå‘½ä»¤ï¼Œè¿™å¥å¯ä»¥ä¸è¦ã€‚
(my-config-markdown-mode)
(when (string= "gnu/linux" system-type)
  (find-file "~/Ubuntu/ubuntu-fs/root/Hugo/content/posts/Home.md"))
(when (string= "darwin" system-type)
  (find-file "~/Desktop/Hugo/content/posts/Home.md"))
(when (string= "windows-nt" system-type)
  (find-file "F:\\Hugo\\content\\posts\\Home.md"))
(hydra-vim-autocmd-markdown-mode/nil)
)
#+END_SRC

** æŒ‰é”®æ˜ å°„
*** evil
#+BEGIN_SRC elisp 
(define-key evil-normal-state-map (kbd ";") 'evil-ex)
(define-key evil-motion-state-map (kbd ";") 'evil-ex)
;; (define-key evil-normal-state-map (kbd "C-j") 'evil-window-down)
;; (define-key evil-normal-state-map (kbd "C-k") 'evil-window-up)
;; (define-key evil-normal-state-map (kbd "C-h") 'evil-window-left)
;; (define-key evil-normal-state-map (kbd "C-l") 'evil-window-right)
(define-key evil-normal-state-map "u" 'undo-fu-only-undo)
(define-key evil-normal-state-map "\C-r" 'undo-fu-only-redo)
;; (define-key evil-normal-state-map "q" 'hydra-evil-exit/body)

#+END_SRC

*** ç³»ç»Ÿ åŠ org-mode cycle
#+BEGIN_SRC elisp 
(general-define-key
 :states 'normal
 :keymaps 'org-mode-map
 "TAB" 'org-cycle
 )
#+END_SRC

*** markdown-mode
#+BEGIN_SRC elisp 
(general-define-key
 ;; :states 'insert
 :states 'normal
 :keymaps 'markdown-mode-map
 "TAB" 'markdown-cycle
 )

#+END_SRC

*** goto-line-preview
#+BEGIN_SRC elisp 
(general-define-key
"M-g g" 'goto-line-preview
)
#+END_SRC
*** ivy counsel ç±»ä¼¼ helm çš„åŒ…
#+BEGIN_SRC elisp 
(global-set-key "\C-s" 'swiper)
(global-set-key (kbd "M-x") 'counsel-M-x)
#+END_SRC
** Termux æŒ‰é”®æ‰€éœ€
#+BEGIN_SRC elisp 
(when (string= "gnu/linux" system-type)
(defun org-download-image-myself-jpg ()
  (interactive) ; å¦‚æœä¸éœ€è¦å®šä¹‰æˆå‘½ä»¤ï¼Œè¿™å¥å¯ä»¥ä¸è¦ã€‚
  (org-babel-load-file
  (expand-file-name "my-config/my-config-org-download.org"
                   user-emacs-directory))
  (shell-command "mv ~/MyFile/Org/*.jpg ~/MyFile/Org/1.jpg")
  (org-download-image "~/MyFile/Org/1.jpg")
  (shell-command "rm ~/MyFile/Org/1.jpg")
)

(defun org-download-image-myself-png ()
  (interactive) ; å¦‚æœä¸éœ€è¦å®šä¹‰æˆå‘½ä»¤ï¼Œè¿™å¥å¯ä»¥ä¸è¦ã€‚
  (org-babel-load-file
  (expand-file-name "my-config/my-config-org-download.org"
                   user-emacs-directory))
  (shell-command "mv ~/MyFile/Org/*.png ~/MyFile/Org/1.png")
  (org-download-image "~/MyFile/Org/1.png")
  (shell-command "rm ~/MyFile/Org/1.png")
)
)
#+END_SRC
** key-chord æ¨¡æ‹Ÿ vim çš„ autocmd æœ‰å¾…ç ”ç©¶
#+BEGIN_SRC elisp 
(use-package key-chord
:straight nil
:defer 1
:load-path "~/.emacs.d/lisp"
:config
(key-chord-mode 1)
(defun my-vim-autocmd-find ()
  (interactive)
  ;; (evil-normal-state)
  ;;(search-forward STRING &optional BOUND NOERROR COUNT)
  (search-forward "<++>" nil t)
  ;;(evil-backward-char &optional COUNT CROSSLINES NOERROR)
  ;; (evil-backward-char)
  ;;(delete-backward-char N &optional KILLFLAG)
  (delete-backward-char 4)
  )
(key-chord-define evil-insert-state-map ";f" 'my-vim-autocmd-find)
;; (key-chord-define evil-insert-state-map " f" 'my-vim-autocmd-find)
(key-chord-define evil-insert-state-map "ff" 'my-vim-autocmd-find)

(key-chord-define evil-insert-state-map "mm" 'my-config-markdown-mode)
;; (key-chord-define evil-insert-state-map " m" 'my-config-markdown-mode)

(key-chord-define evil-insert-state-map ";o" 'my-config-org-syntax)
;; (key-chord-define evil-insert-state-map " o" 'my-config-org-syntax)
(key-chord-define evil-insert-state-map "oo" 'my-config-org-syntax)

(key-chord-define evil-insert-state-map ";;" 'my-config-pyim)

(key-chord-define evil-normal-state-map "b," 'next-buffer)
(key-chord-define evil-normal-state-map "b." 'previous-buffer)

(key-chord-define evil-normal-state-map "qq" 'evil-quit)

;; (key-chord-define meow-insert-state-keymap ";f" 'my-vim-autocmd-find)
;; (key-chord-define meow-insert-state-keymap ";f" 'my-vim-autocmd-find)
;; (key-chord-define meow-insert-state-keymap "jk" 'meow-insert-exit)

)


(defun my-config-org-syntax ()
(interactive)
(org-babel-load-file
 (expand-file-name "my-config/my-config-org-syntax.org"
                   user-emacs-directory))
(hydra-my-config-org-syntax/body)
)
#+END_SRC
** hydra
#+BEGIN_SRC emacs-lisp
(use-package hydra
:straight t
;; :defer 2
:config
(general-define-key
 ;; :keymaps 'meow-normal-state-keymap
 :states 'visual
 "SPC" 'hydra-my-keymaps/body
)
(general-define-key
  ;; :keymaps 'dashboard-mode-map
 :states 'normal
  "SPC" 'hydra-my-keymaps/body
)

(general-define-key
 :states 'motion
 "SPC" 'hydra-my-keymaps/body
)



(defhydra hydra-my-keymaps (:color pink
                            :hint nil
                            :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
			    )
"
_nc_: æ³¨é‡Šæ’ä»¶      _fy_: ç¿»è¯‘æ’ä»¶       _nn_: æ–‡ä»¶æµè§ˆå™¨
_SPC_: å•è¯è·³è·ƒ     _ib_: Ibuffer        _xf_: counsel-find
_oc_: Org-capture   _od_: Org-download   _b_: è·³è½¬buffer
_ow_: org-wiki      _oa_: Org-Agenda     _mdf_: Markdown File
_pya_: æ·»åŠ æ‹¼éŸ³è¯   _pyd_: åˆ é™¤æ‹¼éŸ³è¯    _mde_: Markdown Edit
_xk_: kill buffer   _eww_: eww           _mm_: æ ‡è®°
_mb_: ç§»åŠ¨bufferåˆ°å…¶ä»–çª—å£             _or_: org roam
_ol_: å±…ä¸­æ¨¡å¼      _wg_: å·¥ä½œåŒº        _we_: LSP
"
  ;; ("bb" hydra-centaur-tabs/body :exit t) ;; centaur-tabs
  ;; ("bb" hydra-to-buffer/body :exit t) ;; centaur-tabs
  ("b" hydra-awesome-tab/body :exit t) ;; awesome-tab
  ("mm" hydra-bm/body :exit t)
  ("fy" hydra-go-translate/body :exit t)
  ("ib" hydra-ibuffer/body :exit t)
  ("nc" hydra-evil-nerd-commenter/body :exit t)
  ("nn" hydra-neotree/body :exit t)
  ("SPC" avy-goto-char :exit t) ;; å•è¯è·³è·ƒ
  ("xf" counsel-find-file :exit t) ;; Helm find file
  ("oc" org-capture :exit t)  ;; org capture æ•è·
  ("od" my-config-org-download :exit t) ;; Org-download
  ("ow" my-config-org-wiki :exit t)
  ("oa" org-agenda :exit t)
  ("ob" org-brain-visualize :exit t)
  ("or" hydra-org-roam/body :exit t)
  ("pya" pyim-create-word-from-selection :exit t)
  ("pyd" pyim-delete-word :exit t) 
  ("mb" hydra-buffer-move/body :exit t)
  ("mdf" markdown-mode-start-myself :exit t) ;; Markdown å¯åŠ¨æ–‡ä»¶
  ("mde" my-config-markdown-mode :exit t) ;; Markdown å¿«é€Ÿè¾“å…¥
  ("ol" hydra-olivetti-mode/body :exit t)
  ;; ("mw" hydra-evil-window/body :exit t)
  ("xk" (kill-buffer (buffer-name)) :exit t) ;; æ€æ­»å½“å‰buffer
  ("eww" hydra-eww/body :exit t)
  ("wg" hydra-workgroups2/body :exit t)
  ("we" hydra-lsp-mode/body :exit t)
  ;; (""  :exit t)
  ;; (""  :exit t)
  ;; (""  :exit t)
  ;; (""  :exit t)
  ;; (""  :exit t)
  ;; (""  :exit t)
  ;; (""  :exit t)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)

;; ;; =============================================
;; ;; hydra æ¨¡æ¿
;; (defhydra hydra- (:color pink
;;                   :hint nil
;;                   :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
;; 				     )
;; "
;; "
;;   (""  "" :exit nil)
;;   ("q" nil "cancel")
;;   ("<escape>" nil "cancel")
;; )
;; ;; =============================================


;;=============================================
;; hydra æ¨¡æ¿
;; LSP
(defhydra hydra-lsp-mode (:color pink
                  :hint nil
                  :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_rn_: Rename
_ft_: Allows  _ff_: Fold
"
  ("rn" lsp-rename :exit t)
  ("ft" origami-toggle-all-nodes :exit t)
  ("ff" origami-recursively-toggle-node :exit t)
  ;; (""  :exit t)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;=============================================



;;=============================================
;; workgroups2 ä¿å­˜å½“å‰ç¼–è¾‘çš„ç¼“å­˜åŒºï¼Œä¸‹æ¬¡ç›´æ¥æ‰“å¼€ï¼Œå…‰æ ‡ä½ç½®ä¹Ÿä¼šä¿æŒ
(defhydra hydra-workgroups2 (:color pink
                  :hint nil
                  :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_c_: Create  _o_: Open  _k_: Kill
_r_: Restore
"
  ("c" wg-create-workgroup :exit t)
  ("o" wg-open-workgroup :exit t)
  ("k" wg-kill-workgroup :exit t)
  ("r" wg-restore-frames :exit t)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;; =============================================



;;=============================================
;; olivetti-mode å±…ä¸­æ¨¡å¼
(defhydra hydra-olivetti-mode (:color pink
                  :hint nil
                  :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_m_: å¼€/å…³   _s_: size 
_h_: å‡å°    _l_: å¢å¤§
"
  ("l" olivetti-expand :exit nil)
  ("h" olivetti-shrink :exit nil)
  ("m" olivetti-mode :exit nil)
  ("s" olivetti-set-width :exit nil)
  ;; (""  "" :exit nil)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;=============================================




;;=============================================
;; org-roam
(defhydra hydra-org-roam (:color pink
                          :hint nil
                          :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_f_: node find  _i_: node insert
_c_: capture    _b_: buffer toggle
_u_: ui         _s_: node sync
_g_: id create  _t_: add tags
_ws_: Win start _ls_: Linux start
"
  ("f" org-roam-node-find :exit t)
  ("i" org-roam-node-insert :exit t)
  ("c" org-roam-capture :exit t)
  ("b" org-roam-buffer-toggle :exit t)
  ("u" org-roam-ui-mode :exit t)
  ("s" org-roam-db-sync-myself :exit t)
  ("g" org-id-get-create :exit t)
  ("t" org-roam-tag-add :exit t)
  ("ws" org-roam-windows-start :exit t)
  ("ls" org-roam-linux-start :exit t)
  ;; (""  :exit t)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;=============================================




;;=============================================
;; awesome-tab
(defhydra hydra-awesome-tab (:hint nil
                             :color pink
                             :foreign-keys warn
)
  "
 ^^^^Fast Move             ^^^^Tab                  
-^^^^--------------------+-^^^^---------------------
   ^_k_^   prev group    | _C-a_^^     select first 
 _h_   _l_  switch tab   | _C-e_^^     select last  
   ^_j_^   next group    | _C-j_^^     ace jump     
 ^^0 ~ 9^^ select window | _C-h_/_C-l_ move current 
 _R_  remove window    | _C-w_ evil-window
 _s_  split window     | _v_ vsplit window
-^^^^--------------------+-^^^^---------------------

  ^^Search            ^^Misc
+-^^----------------+-^^---------------------------
| _b_ search buffer | _K_   kill buffer
| _g_ search group  | _C-S-k_ kill others in group
| ^^                | ^^
+-^^----------------+-^^---------------------------
"
  ("h" awesome-tab-backward-tab)
  ("j" awesome-tab-forward-group)
  ("k" awesome-tab-backward-group)
  ("l" awesome-tab-forward-tab)
  ("0" winum-select-window-by-number)
  ("1" winum-select-window-1)
  ("2" winum-select-window-2)
  ("3" winum-select-window-3)
  ("4" winum-select-window-4)
  ("5" winum-select-window-5)
  ("6" winum-select-window-6)
  ("7" winum-select-window-7)
  ("8" winum-select-window-8)
  ("9" winum-select-window-9)
  ("C-w" hydra-evil-window/body :exit t)
  ("R" evil-window-delete :exit nil)
  ("C-a" awesome-tab-select-beg-tab)
  ("C-e" awesome-tab-select-end-tab)
  ("C-j" awesome-tab-ace-jump)
  ("C-h" awesome-tab-move-current-tab-to-left)
  ("C-l" awesome-tab-move-current-tab-to-right)
  ("b" ivy-switch-buffer :exit t)
  ("g" awesome-tab-counsel-switch-group)
  ("s" split-window-below)
  ("v" split-window-right)
  ("K" kill-current-buffer)
  ("C-S-k" awesome-tab-kill-other-buffers-in-current-group)
  ("q" nil "quit")
  ("<escape>" nil "quit"))
;;=============================================

;;=============================================
;; to-buffer
(defhydra hydra-to-buffer (:color pink
                              :hint nil
                              :foreign-keys nil ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_j_: ä¸‹ä¸€ä¸ª   _k_: ä¸Šä¸€ä¸ª
"
  ("j" next-buffer :exit nil)
  ("k" previous-buffer :exit nil)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;=============================================



;;=============================================
;; evil-exit
(defhydra hydra-evil-exit (:color pink
                              :hint nil
                              :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
  ("q" evil-quit "å½“å‰" :exit t)
  ("w" evil-save-and-quit "å…¨éƒ¨" :exit t)
  ("a" evil-record-macro "å½•åˆ¶" :exit t)
  ("x" hydra-evil-exit/nil "å–æ¶ˆ" :exit t)
  ;; (""  "" :exit nil)
  ;; ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;=============================================


;;=============================================
;; evil-window æ¨¡æ¿
(general-define-key
  ;; :keymaps 'dashboard-mode-map
 :states 'normal
  "C-w" 'hydra-evil-window/body
)
(defhydra hydra-evil-window (:color pink
                              :hint nil
                              :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_s_: å¹³è¡Œåˆ†å‰²      _v_: å‚ç›´åˆ†å‰²
_j_: å‘ä¸‹          _k_: å‘ä¸Š 
_h_: å‘å³          _l_: å‘å·¦
_d_: åˆ é™¤å½“å‰çª—å£
"
  ("s" evil-window-split :exit nil)
  ("v" evil-window-vsplit :exit nil)
  ("j" evil-window-down :exit nil)
  ("k" evil-window-up :exit nil)
  ("l" evil-window-right :exit nil)
  ("h" evil-window-left :exit nil)
  ("d" evil-window-delete :exit nil)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;=============================================



;;=============================================
;; buffer-move æ¨¡æ¿
(defhydra hydra-buffer-move (:color pink
                              :hint nil
                              :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_j_: å‘ä¸‹ç§»åŠ¨   _k_: å‘ä¸‹ç§»åŠ¨
_h_: å‘å·¦ç§»åŠ¨   _l_: å‘å³ç§»åŠ¨
"
  ("j" buf-move-down :exit nil)
  ("k" buf-move-up :exit nil)
  ("l" buf-move-right :exit nil)
  ("h" buf-move-left :exit nil)
  ;; (""  "" :exit nil)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;; =============================================


;;=============================================
;; bm æ’ä»¶
(defhydra hydra-bm (:color pink
                              :hint nil
                              :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_j_: ä¸‹ä¸€ä¸ª  _k_: ä¸Šä¸€ä¸ª        _m_: æ ‡è®°
_s_: æŸ¥çœ‹å½“å‰æ–‡ä»¶çš„æ ‡è®°       _v_: æŸ¥çœ‹æ‰€æœ‰æ–‡ä»¶çš„æ ‡è®°     
_r_: é‡è½½å½“å‰æ–‡ä»¶çš„æ ‡è®°
"
  ("j" bm-next  :exit nil)
  ("k" bm-previous  :exit nil)
  ("m" bm-toggle  :exit t)
  ("s" bm-show  :exit t)
  ("v" bm-show-all  :exit t)
  ("r" bm-buffer-restore  :exit nil)
;;   (""  "" :exit nil)
;;   (""  "" :exit nil)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;=============================================




;; eww æµè§ˆå™¨
(defhydra hydra-eww (:color pink
                     :hint nil
                              ;; :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_l_: åé€€          _r_: å‰è¿›             _g_: é‡è½½
_w_: Copy url      _d_: Download         _H_: å†å²
_b_: æ·»åŠ ä¹¦ç­¾      _B_: æ˜¾ç¤ºä¹¦ç­¾åˆ—è¡¨     _q_: é€€å‡ºæµè§ˆå™¨
_G_: é‡æ–°è¾“å…¥é“¾æ¥  _&_: ç”¨å¤–éƒ¨æµè§ˆå™¨æ‰“å¼€
_v_: æºç æ¨¡å¼      _C_: æ˜¾ç¤º Cookie
_o_: eww           _n_: å‘ä¸‹æ»‘åŠ¨         _p_: å‘ä¸Šæ»‘åŠ¨
_j_: ä¸‹5è¡Œ         _k_: ä¸Š5è¡Œ
"
  ("l" eww-back-url :exit nil)
  ("r" eww-forward-url :exit nil)
  ("g" eww-reload :exit nil)
  ("w" eww-copy-page-url :exit nil)
  ("d" eww-download :exit nil)
  ("H" eww-list-histories :exit nil)
  ("b" eww-add-bookmark :exit nil)
  ("B" eww-list-bookmarks :exit nil)
  ("&" eww-browse-with-external-browser :exit nil)
  ("v" eww-view-source :exit nil)
  ("C" url-cookie-list :exit nil)
  ("G" eww-open-url :exit nil)
  ("o" eww :exit nil)
  ("n" (evil-scroll-page-down 1) :exit nil)
  ("p" (evil-scroll-page-up 1) :exit nil)
  ("q" quit-window :exit nil)
  ("k" (evil-previous-line 5) :exit nil)
  ("j" (evil-next-line 5) :exit nil)
  ;; (""  :exit nil)
  ;; ("q" nil "cancel")
  ("<escape>" nil "cancel")
)

;;=============================================
;; centaur-tabs
(defhydra hydra-centaur-tabs (:color pink
                              :hint nil
                              :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
  ("j" centaur-tabs-forward "ä¸‹ä¸€ä¸ª" :exit nil)
  ("k" centaur-tabs-backward "ä¸Šä¸€ä¸ª" :exit nil)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)


;; ;;=============================================
;; ;; Ibuffer
;; (defhydra hydra-ibuffer (:color pink
;;                          :hint nil
;;                          :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
;; 			 )
;; "
;; _b_: Ibuffer       _t_: Jump buffer      _T_: toggle-marks
;; _j_: ä¸‹ä¸€è¡Œ        _k_: ä¸Šä¸€è¡Œ           _u_: unmark
;; _RET_: æ‰“å¼€buffer  _g_: æ›´æ–°bufferçŠ¶æ€
;; _d_: åˆ é™¤æ ‡è®°      _m_: æ ‡è®°             _SPC_: è·³è½¬
;; _D_: åˆ é™¤buffer    _S_: do-save
;; "
;;   ("b" ibuffer :exit nil)
;;   ("t" ibuffer-jump-to-buffer :exit t)
;;   ("j" ibuffer-forward-line :exit nil)
;;   ("k" ibuffer-backward-line :exit nil)
;;   ("d" ibuffer-mark-for-delete :exit nil)
;;   ("RET" ibuffer-visit-buffer :exit t)
;;   ("o" ibuffer-visit-buffer :exit t)
;;   ("g" ibuffer-update :exit nil)
;;   ("m" ibuffer-mark-forward :exit nil)
;;   ("D" ibuffer-do-delete :exit nil)
;;   ("S" ibuffer-do-delete :exit nil)
;;   ("T" ibuffer-toggle-marks :exit nil)
;;   ("u" ibuffer-unmark-forward :exit nil)
;;   ("SPC" avy-goto-char :exit nil)
;;   ;; (""  :exit t)
;;   ;; (""  :exit t)
;;   ;; (""  :exit t)
;;   ("q" nil "cancel")
;;   ("<escape>" nil "cancel")
;; )
;;===============================================
;;====== neotree æ–‡ä»¶æµè§ˆå™¨
(defhydra hydra-neotree (:color pink
                         :hint nil
                         :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
			 )
"
_j_: ä¸‹ä¸€è¡Œ           _k_: ä¸Šä¸€è¡Œ           _o_: æ‰“å¼€
_n_: æ‰“å¼€æ–‡ä»¶æµè§ˆå™¨   _x_: å…³é—­             _r_: åˆ·æ–°
_a_: çª—å£             _h_: æŸ¥çœ‹éšè—æ–‡ä»¶     _u_: ä¸Šçº§ç›®å½•
_md_: åˆ é™¤            _mc_: å¤åˆ¶            _O_: é€’å½’æ‰“å¼€ç›®å½•
_ma_: åˆ›å»ºæ–°          _cd_: æ”¹å˜æ ¹ç›®å½•
_SPC_: è·³è·ƒ           _f_: å‘ä¸‹æ»šåŠ¨         _b_: å‘ä¸Šæ»šåŠ¨
"
  ("j" neotree-next-line)
  ("k" neotree-previous-line)
  ("o" neotree-enter)
  ("RET" neotree-enter)
  ("n" neotree-toggle)
  ("x" neotree-hide :exit t)
  ("r" neotree-refresh)
  ("a" neotree-stretch-toggle)
  ("u" neotree-select-up-node)
  ("h" neotree-hidden-file-toggle)
  ("O" neotree-open-dir-recursive)
  ("md" neotree-delete-node)
  ("mc" neotree-copy-node)
  ("mr" neotree-remane-node)
  ("ma" neotree-create-node)
  ("cd" neotree-change-root)
  ("SPC" avy-goto-char)
  ("f" evil-scroll-page-down)
  ("b" evil-scroll-page-up)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;==============================
(use-package beginner-translate
:straight nil
:defer 3
:load-path "~/.emacs.d/lisp"
)
;; ç¿»è¯‘æ’ä»¶ go-translate
(defhydra hydra-go-translate (:color pink
                              :hint nil
                              :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
			      )
  ("y" gts-do-translate-my "ç¿»è¯‘")
  ("x" delete-window "å…³é—­ç¿»è¯‘çª—å£":exit t)
  ("t" beginner-translate-main "çŠ¶æ€æ ç¿»è¯‘":exit t)
  ("s" sdcv-search-pointer-my "sdcvç¿»è¯‘" :exit t)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)
;;==============================
;;======= æ³¨é‡Šæ’ä»¶ evil-nerd-commenter
(defhydra hydra-evil-nerd-commenter (:color pink
                                     :hint nil
                                     :foreign-keys warn ;; ä¸è¦ä½¿ç”¨hydraä»¥å¤–çš„é”®
				     )
"
_i_: æ³¨é‡Šorå–æ¶ˆæ³¨é‡Š   _l_: å¿«é€Ÿæ³¨é‡Šorå–æ¶ˆ
_p_: æ®µè½æ³¨é‡Š         _c_: å¤åˆ¶å¹¶æ³¨é‡Š
"
  ("i" evilnc-comment-or-uncomment-lines :exit t)
  ("l" evilnc-quick-comment-or-uncomment-to-the-line :exit t)
  ("c" evilnc-copy-and-comment-lines :exit t)
  ("p" evilnc-comment-or-uncomment-paragraphs :exit t)
  ("q" nil "cancel")
  ("<escape>" nil "cancel")
)









);; åŒ…ç»“å°¾
#+END_SRC

** pretty-hydra
#+BEGIN_SRC emacs-lisp
(use-package pretty-hydra
  :defer 2
  :straight t
  :bind ("<f6>" . toggles-hydra/body)
  :init
  (pretty-hydra-define toggles-hydra (:title "Toggles" :color amaranth :quit-key "q" :foreign-keys warn)

    ("åŸºç¡€"
     (("es" evil-escape-mode "evil-escape" :toggle t)
      ("ln" global-linum-mode "è¡Œå·" :toggle t)
      ("lr" linum-relative-mode "ç›¸å¯¹è¡Œå·" :toggle t)
      ("em" emojify-mode "è¡¨æƒ…ç¬¦å·" :toggle t)
      ;; ("pj" pyim-convert-string-at-point "pyimé‡‘æ‰‹æŒ‡" :toggle t :exit t)
      ;; ("py" my-config-pyim "pyim" :toggle t :exit t)
      ;; ("pi" pyim-isearch-mode "æ‹¼éŸ³æœç´¢æ–‡å­—" :toggle t :exit t)
      ("oj" org-download-image-myself-jpg "Termux-jpg" :toggle t :exit t)
      ("op" org-download-image-myself-png "Termuex-png" :toggle t :exit t)
      ;; ("cnd" cnfonts-set-font "Orgå­—ä½“å¯¹é½" :toggle t :exit t)
      ;; ("cnm" cnfonts-set-font-and-mode-myself "Orgå­—ä½“å¯¹é½" :toggle t :exit t)
      ;; ("cnm" cnfonts-mode "Orgå­—ä½“å¯¹é½æ¨¡å¼" :toggle t :exit t)
      ("cnp" pangu-spacing-mode "ä¸­è‹±æ–‡æ··ç‰ˆ, ç¾åŒ–" :toggle t :exit t)
      ("<escape>" nil "cancel")
      ("q" nil "cancel")
      )
      )
      )
)




#+END_SRC

** Test
#+BEGIN_SRC emacs-lisp
  ;;;; æ£€æŸ¥å¯åŠ¨æ—¶é—´
  ;; Use a hook so the message doesn't get clobbered by other messages.
    ;; (add-hook 'emacs-startup-hook
    ;;     (lambda ()
    ;; 	  (message "Emacs ready in %s with %d garbage collections."
    ;; 	      (format "%.2f seconds"
    ;; 		  (float-time
    ;; 		      (time-subtract after-init-time before-init-time)))
    ;; 	  gcs-done)))



  ;; ;; ;; åŠ å¯†
  ;; ;; (require 'org-crypt)
  ;; ;; ;; é˜²æ­¢ crypt æ ‡ç­¾ä½¿ç”¨ç»§æ‰¿ï¼Œè¿™æ ·åŠ å¯†æ•°æ®ä¸­å°±æ²¡æœ‰åŠ å¯†æ•°æ®ã€‚
  ;; ;; (setq org-tags-exclude-from-inheritance (quote ("crypt")))
  ;; ;; ;; è®¾ç½® GPG å¯†é’¥ä»¥ç”¨äºåŠ å¯†
  ;; ;; (setq org-crypt-key "821280F4")
  ;; ;; ;; ä¿å­˜å‰åŠ å¯†æ‰€æœ‰æ¡ç›®ã€‚
  ;; ;; (org-crypt-use-before-save-magic)
  ;; ;; ;; åœ¨è§£å¯†æ¡ç›®ä¹‹å‰ç¦ç”¨å½“å‰ç¼“å†²åŒºçš„è‡ªåŠ¨ä¿å­˜æ¨¡å¼ã€‚
  ;; ;; (setq org-crypt-disable-auto-save t)
  ;; ;; ;; å°† crypt è®¾ç½®ä¸º Org æ–‡ä»¶ä¸­å¯ç”¨çš„é»˜è®¤æ ‡ç­¾ã€‚
  ;; ;; (setq org-tag-alist '(("crypt" . ?c)))

  ;; ;; å¤šå…‰æ ‡åŒæ—¶ç¼–è¾‘æ–‡æœ¬, è¿˜æ²¡æœ‰å¼„æ˜ç™½
  ;; (use-package multiple-cursors
  ;; :straight t
  ;; :defer 2
  ;; :config
  ;; )


  ;; ;; (use-package english-teacher
  ;; ;;   :load-path "~/.emacs.d/plugins/english-teacher.el"
  ;; ;;   :hook ((Info-mode
  ;; ;;           elfeed-show-mode
  ;; ;;           eww-mode
  ;; ;;           Man-mode
  ;; ;;           Woman-Mode) . english-teacher-follow-mode)
  ;; ;;   :config
  ;; ;;   (setq english-teacher-show-result-function 'english-teacher-eldoc-show-result-function)
  ;; ;;   (setq english-teacher-backend 'google) ; 'youdao bing google baidu
  ;; ;;   )
  ;; (use-package translate-mode
  ;; :defer 2
  ;; :load-path "~/.emacs.d/lisp"
  ;; )
  ;; ;; (add-hook 'dashboard-mode-hook '(lambda () (evil-insert 1)))
  ;; (use-package cnhl
  ;; :load-path "~/.emacs.d/cnhl"
  ;; )

  ;; é€€å‡º Emacs æé†’
  ;; (setq confirm-kill-emacs 'y-or-n-p)
  ;; (use-package vterm-toggle
  ;; :defer 2
  ;; :straight nil
  ;; :load-path "~/.emacs.d/lisp"
  ;; )
  ;; (use-package chinese-yasdcv
  ;; ;; :defer 5
  ;; :config
  ;; (setq yasdcv-sdcv-dicts
  ;;   '(
  ;;     ("lanconghy"  "æ‡’è™«ç®€æ˜æ±‰è‹±è¯å…¸" nil t)
  ;;     ("lancongyh"  "æ‡’è™«ç®€æ˜è‹±æ±‰è¯å…¸" nil t)
  ;;   ))
  ;; )



#+END_SRC
